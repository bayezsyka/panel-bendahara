import{r,u as F,j as e,H as W}from"./app-DDkThiwp.js";import{B as V}from"./BendaharaLayout-DkT6SKYz.js";import{M as k}from"./Modal-cheLN1Sv.js";import{I as d}from"./InputLabel-BYYSUQrg.js";import{T as g}from"./TextInput-cppD8dzz.js";import{P as N}from"./PrimaryButton-zZtWvJJz.js";import{S as T}from"./SecondaryButton-OFDyRyhG.js";import{D as $}from"./DangerButton-lcT4Nhxp.js";import{P as G,B as J}from"./PageHeader-C2PkCXBo.js";import{D as Q}from"./DataTable-g21gu-uf.js";import{S as D}from"./Select-BzXuO149.js";import{C as U}from"./Card-CtLf2Gfr.js";/* empty css            */import"./ApplicationLogo-0iz7Fc7z.js";import"./transition-BAZ8-2fJ.js";import"./with-selector-DBl-jayN.js";function ue({transactions:w,cashSources:p,cashExpenseTypes:x,totalIn:S,totalOut:K,balance:C,filters:X}){const[B,j]=r.useState(!1),[u,M]=r.useState("in"),[h,v]=r.useState(null),[L,o]=r.useState(!1),[f,y]=r.useState(null),{data:i,setData:n,post:I,put:P,delete:H,processing:l,errors:s,reset:_}=F({transaction_date:new Date().toISOString().split("T")[0],type:"in",cash_type:"kas_kecil",amount:"",description:"",cash_source_id:"",cash_expense_type_id:""}),c=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),q=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),b=(a,t=null)=>{M(a),v(t),t?n({transaction_date:t.transaction_date,type:t.type,cash_type:"kas_kecil",amount:t.amount,description:t.description,cash_source_id:t.cash_source_id||"",cash_expense_type_id:t.cash_expense_type_id||""}):(_(),n(E=>({...E,type:a,cash_type:"kas_kecil",cash_source_id:a==="in"&&p.length>0?p[0].id:"",cash_expense_type_id:a==="out"&&x.length>0?x[0].id:""}))),j(!0)},m=()=>{j(!1),v(null),_()},A=a=>{a.preventDefault(),h?P(route("kas.transactions.update",h.id),{onSuccess:()=>m()}):I(route("kas.transactions.store"),{onSuccess:()=>m()})},O=a=>{y(a),o(!0)},R=()=>{f&&H(route("kas.transactions.destroy",f.id),{onSuccess:()=>{o(!1),y(null)}})},z=[{key:"date",label:"Tanggal",render:a=>e.jsx("span",{className:"text-gray-600 whitespace-nowrap",children:q(a.transaction_date)})},{key:"category",label:"Kategori/Tipe",render:a=>e.jsxs("div",{children:[e.jsx(J,{variant:a.type==="in"?"emerald":"red",size:"md",children:a.type==="in"?"Masuk":"Keluar"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:a.type==="in"?a.cash_source?.name||"Internal Transfer/Lainnya":a.cash_expense_type?.name||"Biaya Lain"})]})},{key:"description",label:"Keterangan",render:a=>e.jsx("span",{className:"text-gray-800 font-medium",children:a.description})},{key:"amount",label:"Nominal",align:"right",render:a=>e.jsxs("span",{className:`font-bold whitespace-nowrap ${a.type==="in"?"text-emerald-600":"text-red-600"}`,children:[a.type==="in"?"+":"-",c(a.amount)]})},{key:"actions",label:"Aksi",align:"center",render:a=>e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("button",{onClick:()=>b(a.type,a),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>O(a),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}];return e.jsxs(V,{children:[e.jsx(W,{title:"Kas Kecil"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(G,{title:"Kas Kecil",subtitle:"Kelola pemasukan dan pengeluaran kas kecil.",backLink:route("kas.dashboard"),backLabel:"Dashboard Kas"})}),e.jsxs("div",{className:"bg-purple-600 rounded-xl p-6 text-white shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 h-28 w-28 translate-x-8 -translate-y-8 rounded-full bg-white/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium uppercase tracking-wider mb-1",children:"Saldo Saat Ini"}),e.jsx("h3",{className:"text-3xl font-bold",children:c(C)})]})]})]}),e.jsxs(U,{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[e.jsx("div",{className:"flex gap-3",children:e.jsx(N,{onClick:()=>b("out"),className:"bg-red-600 hover:bg-red-700 focus:ring-red-500 whitespace-nowrap",children:"- Pengeluaran"})}),e.jsxs("div",{className:"flex gap-6 text-sm whitespace-nowrap",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block text-xs",children:"Total Masuk"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:c(S)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block text-xs",children:"Total Keluar"}),e.jsx("span",{className:"font-semibold text-red-600",children:c(K)})]})]})]}),e.jsx(Q,{columns:z,data:w||[],emptyMessage:"Belum ada transaksi"})]}),e.jsx(k,{show:B,onClose:m,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:h?"Edit Transaksi":u==="in"?"Tambah Pemasukan Kas Kecil":"Tambah Pengeluaran Kas Kecil"}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{value:"Tanggal"}),e.jsx(g,{type:"date",className:"w-full mt-1",value:i.transaction_date,onChange:a=>n("transaction_date",a.target.value),required:!0}),s.transaction_date&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.transaction_date})]}),u==="in"?e.jsxs("div",{children:[e.jsx(d,{value:"Sumber Dana"}),e.jsx(D,{className:"mt-1",value:i.cash_source_id,onChange:a=>n("cash_source_id",a.target.value),placeholder:"-- Pilih Sumber Dana --",options:p.map(a=>({value:a.id,label:a.name})),required:!0}),s.cash_source_id&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.cash_source_id})]}):e.jsxs("div",{children:[e.jsx(d,{value:"Tipe Biaya"}),e.jsx(D,{className:"mt-1",value:i.cash_expense_type_id,onChange:a=>n("cash_expense_type_id",a.target.value),placeholder:"-- Pilih Tipe Biaya --",options:x.map(a=>({value:a.id,label:a.name})),required:!0}),s.cash_expense_type_id&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.cash_expense_type_id})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Keterangan"}),e.jsx(g,{type:"text",className:"w-full mt-1",value:i.description,onChange:a=>n("description",a.target.value),placeholder:"Contoh: Dropping dari Kas Besar / Beli ATK",required:!0}),s.description&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.description})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Nominal (Rp)"}),e.jsx(g,{type:"number",className:"w-full mt-1",value:i.amount,onChange:a=>n("amount",a.target.value),placeholder:"0",required:!0}),s.amount&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.amount})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(T,{onClick:m,disabled:l,children:"Batal"}),e.jsx(N,{className:u==="in"?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700",disabled:l,children:l?"Menyimpan...":"Simpan Transaksi"})]})]})]})}),e.jsx(k,{show:L,onClose:()=>o(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Hapus Transaksi?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Apakah Anda yakin? Tindakan ini tidak dapat dibatalkan."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(T,{onClick:()=>o(!1),children:"Batal"}),e.jsx($,{onClick:R,disabled:l,children:l?"Menghapus...":"Hapus Transaksi"})]})]})})]})}export{ue as default};
