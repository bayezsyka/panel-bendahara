import{f as q,g as pe,r as L,u as ve,d as je,c as E,j as e,H as ye,L as Ne}from"./app-Ph_d576U.js";import{B as we,S as ke}from"./BendaharaLayout-Bbetsg8T.js";import{M as Te}from"./Modal-BhVshn3Q.js";import{I as Q}from"./InputLabel-BCamJjXJ.js";import{T as M}from"./TextInput-B5DhdEg7.js";import{I as Z}from"./InputError-CN-7pehF.js";import{P as ee}from"./PrimaryButton-CO5U5iMa.js";import{S as Se}from"./SecondaryButton-DU0wGuVH.js";/* empty css            */import"./ApplicationLogo-B6DA0t4q.js";import"./transition-HONoVvlR.js";import"./with-selector-CsYLJ9WJ.js";var D,te;function ge(){if(te)return D;te=1;function a(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}return D=a,D}var A,re;function _e(){if(re)return A;re=1;var a=typeof q=="object"&&q&&q.Object===Object&&q;return A=a,A}var P,ae;function he(){if(ae)return P;ae=1;var a=_e(),r=typeof self=="object"&&self&&self.Object===Object&&self,s=a||r||Function("return this")();return P=s,P}var G,ne;function Ie(){if(ne)return G;ne=1;var a=he(),r=function(){return a.Date.now()};return G=r,G}var F,se;function Ce(){if(se)return F;se=1;var a=/\s/;function r(s){for(var i=s.length;i--&&a.test(s.charAt(i)););return i}return F=r,F}var W,ie;function Oe(){if(ie)return W;ie=1;var a=Ce(),r=/^\s+/;function s(i){return i&&i.slice(0,a(i)+1).replace(r,"")}return W=s,W}var U,oe;function be(){if(oe)return U;oe=1;var a=he(),r=a.Symbol;return U=r,U}var H,le;function Re(){if(le)return H;le=1;var a=be(),r=Object.prototype,s=r.hasOwnProperty,i=r.toString,l=a?a.toStringTag:void 0;function g(m){var c=s.call(m,l),d=m[l];try{m[l]=void 0;var n=!0}catch{}var u=i.call(m);return n&&(c?m[l]=d:delete m[l]),u}return H=g,H}var V,ce;function qe(){if(ce)return V;ce=1;var a=Object.prototype,r=a.toString;function s(i){return r.call(i)}return V=s,V}var $,de;function Le(){if(de)return $;de=1;var a=be(),r=Re(),s=qe(),i="[object Null]",l="[object Undefined]",g=a?a.toStringTag:void 0;function m(c){return c==null?c===void 0?l:i:g&&g in Object(c)?r(c):s(c)}return $=m,$}var K,ue;function Ee(){if(ue)return K;ue=1;function a(r){return r!=null&&typeof r=="object"}return K=a,K}var z,me;function Be(){if(me)return z;me=1;var a=Le(),r=Ee(),s="[object Symbol]";function i(l){return typeof l=="symbol"||r(l)&&a(l)==s}return z=i,z}var X,xe;function Me(){if(xe)return X;xe=1;var a=Oe(),r=ge(),s=Be(),i=NaN,l=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,m=/^0o[0-7]+$/i,c=parseInt;function d(n){if(typeof n=="number")return n;if(s(n))return i;if(r(n)){var u=typeof n.valueOf=="function"?n.valueOf():n;n=r(u)?u+"":u}if(typeof n!="string")return n===0?n:+n;n=a(n);var f=g.test(n);return f||m.test(n)?c(n.slice(2),f?2:8):l.test(n)?i:+n}return X=d,X}var Y,fe;function De(){if(fe)return Y;fe=1;var a=ge(),r=Ie(),s=Me(),i="Expected a function",l=Math.max,g=Math.min;function m(c,d,n){var u,f,k,b,x,h,N=0,I=!1,w=!1,T=!0;if(typeof c!="function")throw new TypeError(i);d=s(d)||0,a(n)&&(I=!!n.leading,w="maxWait"in n,k=w?l(s(n.maxWait)||0,d):k,T="trailing"in n?!!n.trailing:T);function S(o){var y=u,_=f;return u=f=void 0,N=o,b=c.apply(_,y),b}function B(o){return N=o,x=setTimeout(j,d),I?S(o):b}function C(o){var y=o-h,_=o-N,J=d-y;return w?g(J,k-_):J}function O(o){var y=o-h,_=o-N;return h===void 0||y>=d||y<0||w&&_>=k}function j(){var o=r();if(O(o))return R(o);x=setTimeout(j,C(o))}function R(o){return x=void 0,T&&u?S(o):(u=f=void 0,b)}function t(){x!==void 0&&clearTimeout(x),N=0,u=h=f=x=void 0}function p(){return x===void 0?b:R(r())}function v(){var o=r(),y=O(o);if(u=arguments,f=this,h=o,y){if(x===void 0)return B(h);if(w)return clearTimeout(x),x=setTimeout(j,d),S(h)}return x===void 0&&(x=setTimeout(j,d)),b}return v.cancel=t,v.flush=p,v}return Y=m,Y}var Ae=De();const Pe=pe(Ae);function Qe({customers:a=[],filters:r={}}){const[s,i]=L.useState(!1),{data:l,setData:g,post:m,processing:c,errors:d,reset:n,clearErrors:u}=ve({name:"",contact:""}),[f,k]=L.useState(r?.search||""),[b,x]=L.useState(r?.status||""),[h,N]=L.useState(typeof r?.sort=="string"?r.sort:"updated_at"),I=je.useCallback(Pe((t,p,v)=>{E.get(route("receivable.customers.index"),{search:t,status:p,sort:v},{preserveState:!0,replace:!0})},300),[]),w=t=>{const p=t.target.value;k(p),I(p,b,h)},T=t=>{x(t),E.get(route("receivable.customers.index"),{search:f,status:t,sort:h},{preserveState:!0,replace:!0})},S=t=>{N(t),E.get(route("receivable.customers.index"),{search:f,status:b,sort:t},{preserveState:!0,replace:!0})},B=()=>{ke.fire({title:"RESET DATA PIUTANG?",text:"PERINGATAN: Ini akan menghapus SEMUA data Customer dan Transaksi Piutang. ID akan di-reset dari awal. Data tidak bisa dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"YA, RESET SEMUA!",cancelButtonText:"Batal",focusCancel:!0}).then(t=>{t.isConfirmed&&E.post(route("receivable.customers.reset-all"))})},C=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),O=()=>{i(!0),n(),u()},j=()=>{i(!1),n(),u()},R=t=>{t.preventDefault(),m(route("receivable.customers.store"),{onSuccess:()=>j()})};return e.jsxs(we,{children:[e.jsx(ye,{title:"Customer Piutang"}),e.jsx("div",{className:"pt-6 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4 px-4 sm:px-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Daftar Customer"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 font-medium whitespace-nowrap",children:"Monitoring piutang dan history transaksi pelanggan."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:B,className:"inline-flex items-center px-4 py-2 bg-white border border-red-100 rounded-xl font-bold text-xs text-red-600 uppercase tracking-widest hover:bg-red-50 transition-all shadow-sm",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})}),"Reset"]}),e.jsx(ee,{onClick:O,className:"!rounded-xl !py-2.5 !px-5 shadow-md shadow-indigo-100 hover:shadow-lg transition-all active:scale-95 text-[11px] !font-black !uppercase tracking-widest",children:"+ Customer"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 mb-6 flex flex-col md:flex-row gap-4 justify-between items-center transition-all hover:shadow-md",children:[e.jsxs("div",{className:"w-full md:w-1/3 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 group-focus-within:text-indigo-500 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx(M,{type:"text",className:"w-full pl-10 !rounded-xl !border-gray-100 focus:!border-indigo-300 focus:!ring-indigo-100 transition-all",placeholder:"Cari nama atau kontak...",value:f,onChange:w})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[e.jsxs("select",{value:b,onChange:t=>T(t.target.value),className:"border-gray-100 focus:border-indigo-300 focus:ring-indigo-100 rounded-xl shadow-sm text-sm font-semibold text-gray-700 bg-gray-50/50",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"belum_lunas",children:"Belum Lunas"}),e.jsx("option",{value:"lunas",children:"Lunas"})]}),e.jsxs("select",{value:h,onChange:t=>S(t.target.value),className:"border-gray-100 focus:border-indigo-300 focus:ring-indigo-100 rounded-xl shadow-sm text-sm font-semibold text-gray-700 bg-gray-50/50",children:[e.jsx("option",{value:"updated_at",children:"Terbaru Diupdate"}),e.jsx("option",{value:"created_at",children:"Terbaru Dibuat"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(t=>{const p=(t.receivable_transactions_sum_bill_amount||0)-(t.receivable_transactions_sum_payment_amount||0),v=p<=0,o=parseFloat(t.receivable_transactions_sum_volume)||0;return e.jsxs(Ne,{href:route("receivable.customers.show",t.id),className:"block bg-white overflow-hidden shadow-sm sm:rounded-2xl p-6 border border-gray-100 hover:shadow-xl hover:border-indigo-200 transition-all duration-300 hover:-translate-y-2 relative group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsxs("div",{className:"bg-indigo-50 text-indigo-600 text-[10px] font-black px-2 py-1 rounded-lg min-w-[2rem] text-center border border-indigo-100",children:["ID-",t.id]}),e.jsx("h3",{className:"text-lg font-black text-gray-800 truncate group-hover:text-indigo-600 transition-colors tracking-tight",title:t.name,children:t.name})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black whitespace-nowrap ml-2 shadow-sm ${v?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:v?"LUNAS":"BELUM"})]}),e.jsxs("div",{className:"space-y-3.5",children:[t.contact?e.jsxs("div",{className:"text-xs font-semibold text-gray-400 bg-gray-50 px-3 py-1.5 rounded-lg flex items-center gap-2 w-fit",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.contact]}):e.jsx("div",{className:"h-7 text-xs italic text-gray-300",children:"Kontak tidak tersedia"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 py-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter",children:"Total Volume"}),e.jsxs("span",{className:"font-extrabold text-gray-700 text-sm",children:[o.toLocaleString("id-ID")," mÂ³"]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter text-right",children:"Pembayaran"}),e.jsx("span",{className:"font-extrabold text-emerald-600 text-sm",children:C(t.receivable_transactions_sum_payment_amount||0)})]})]}),e.jsxs("div",{className:"pt-4 mt-2 border-t border-gray-100 flex justify-between items-center group-hover:bg-indigo-50/10 transition-colors",children:[e.jsx("span",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Sisa Hutang"}),e.jsx("span",{className:`text-lg font-black tracking-tighter ${v?"text-gray-300":"text-rose-600"}`,children:C(p)})]})]}),e.jsx("div",{className:"absolute right-3 top-[43%] translate-x-4 opacity-0 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 text-indigo-400",children:e.jsx("svg",{className:"w-10 h-10 stroke-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5l7 7-7 7"})})})]},t.id)}),a.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"Belum ada data customer."})})]})]})}),e.jsx(Te,{show:s,onClose:j,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tambah Customer Baru"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"name",value:"Nama Customer"}),e.jsx(M,{id:"name",type:"text",name:"name",value:l.name,className:"mt-1 block w-full",isFocused:!0,onChange:t=>g("name",t.target.value),placeholder:"PT. Kontraktor Sejahtera"}),e.jsx(Z,{message:d.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"contact",value:"Kontak / No. HP (Optional)"}),e.jsx(M,{id:"contact",type:"text",name:"contact",value:l.contact,className:"mt-1 block w-full",onChange:t=>g("contact",t.target.value),placeholder:"08123456789"}),e.jsx(Z,{message:d.contact,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(Se,{onClick:j,disabled:c,children:"Batal"}),e.jsx(ee,{disabled:c,children:"Simpan Customer"})]})]})]})})]})}export{Qe as default};
