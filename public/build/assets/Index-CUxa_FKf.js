import{r as p,u as S,j as e,H as L}from"./app-DteqDP6z.js";import{B as P,S as w}from"./BendaharaLayout-Y4eYKbl_.js";import{P as E,B as D}from"./PageHeader-BwzuOZZU.js";import{M as H}from"./Modal-DBfKL5QP.js";import{I as u}from"./InputLabel-Ud7_2xCW.js";import{T as I}from"./TextInput-BES_4MaH.js";import{I as h}from"./InputError-Cg1LX1Eh.js";import{P as x}from"./PrimaryButton-DDpf5jRw.js";import{S as K}from"./SecondaryButton-ImdCa0q-.js";import{D as A}from"./DataTable-B9Wfr6FR.js";import{S as z}from"./Select-DEj6iuiA.js";/* empty css            */import"./ApplicationLogo-CFUqUAf-.js";import"./transition-CEgtaOYI.js";import"./use-sync-refs-DPG-LCFQ.js";import"./open-closed-BdKgPkKs.js";import"./keyboard-BygUKIa8.js";import"./with-selector-hyrcWQ_n.js";import"./description-CE2MTl-4.js";import"./close-provider-PEpNyiF9.js";function re({expenseTypes:g,currentOfficeId:j}){const[f,s]=p.useState(!1),[r,l]=p.useState(!1),t=j===2,{data:i,setData:o,post:y,put:k,delete:v,processing:d,errors:c,reset:n,clearErrors:m}=S({id:"",name:"",code:"",category:"out"}),b=()=>{l(!1),n(),o("category","out"),m(),s(!0)},B=a=>{l(!0),o({id:a.id,name:a.name,code:a.code||"",category:a.category||"out"}),m(),s(!0)},T=a=>{a.preventDefault(),r?k(route("projectexpense.expense-types.update",i.id),{onSuccess:()=>{s(!1),n()}}):y(route("projectexpense.expense-types.store"),{onSuccess:()=>{s(!1),n()}})},N=a=>{w.fire({title:"Hapus Tipe?",text:"Data tipe ini akan dihapus. Pastikan tidak sedang digunakan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal"}).then(M=>{M.isConfirmed&&v(route("projectexpense.expense-types.destroy",a))})},C=[{key:"name",label:t?"Nama Tipe":"Nama Tipe Biaya",render:a=>e.jsx("span",{className:"font-medium text-gray-900",children:a.name})},...t?[{key:"category",label:"Kategori",render:a=>e.jsx(D,{variant:a.category==="in"?"green":"red",size:"md",children:a.category==="in"?"Pemasukan":"Pengeluaran"})}]:[],{key:"actions",label:"Aksi",align:"right",render:a=>e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx("button",{onClick:()=>B(a),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>N(a.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}];return e.jsxs(P,{children:[e.jsx(L,{title:t?"Kelola Tipe":"Kelola Tipe Biaya"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{title:t?"Data Tipe":"Data Tipe Biaya",backLink:route("projectexpense.overview"),backLabel:"Dashboard",actions:e.jsx(x,{onClick:b,children:t?"+ Tambah Tipe":"+ Tambah Tipe Biaya"})}),e.jsx(A,{columns:C,data:g,emptyMessage:"Belum ada data tipe."})]}),e.jsx(H,{show:f,onClose:()=>s(!1),children:e.jsxs("form",{onSubmit:T,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:r?t?"Edit Tipe":"Edit Tipe Biaya":t?"Tambah Tipe Baru":"Tambah Tipe Biaya Baru"}),e.jsxs("div",{className:"space-y-4",children:[t&&e.jsxs("div",{children:[e.jsx(u,{value:"Kategori Transaksi"}),e.jsx(z,{className:"mt-1",value:i.category,onChange:a=>o("category",a.target.value),placeholder:"",options:[{value:"out",label:"Pengeluaran (Kas Keluar)"},{value:"in",label:"Pemasukan (Kas Masuk)"}]}),e.jsx(h,{message:c.category,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(u,{value:t?"Nama Tipe":"Nama Tipe Biaya"}),e.jsx(I,{value:i.name,onChange:a=>o("name",a.target.value),className:"mt-1 block w-full",placeholder:t?"Contoh: Material, BBM, Upah":"Contoh: Gaji, Listrik, Material",required:!0}),e.jsx(h,{message:c.name,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(K,{onClick:()=>s(!1),children:"Batal"}),e.jsx(x,{disabled:d,children:d?"Menyimpan...":r?"Simpan Perubahan":"Simpan"})]})]})})]})}export{re as default};
