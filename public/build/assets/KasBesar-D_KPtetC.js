import{r as N,u as F,j as e,H as E,a as g}from"./app-CiO2VQnx.js";import{B as H,S as u}from"./BendaharaLayout-BmOFVfY5.js";import{M as P}from"./Modal-DNNIChmb.js";import{I as p}from"./InputLabel-BcUhDq7e.js";import{T as j}from"./TextInput-Co6_gCoM.js";import{I as h}from"./InputError-CssPRlhI.js";import{P as W}from"./PrimaryButton-DU1wUM7k.js";import{S as R}from"./SecondaryButton-ygnHJiWj.js";/* empty css            */import"./ApplicationLogo-DCX0GPCz.js";import"./transition-DgWT-zWI.js";import"./with-selector-Bmb2Ajv7.js";function Z({transactions:f,expenseTypes:b,totalIn:k,totalOut:w,balance:n,filters:i}){const[_,a]=N.useState(!1),[x,l]=N.useState(null),{data:s,setData:r,post:S,put:C,processing:K,errors:m,reset:o}=F({transaction_date:new Date().toISOString().split("T")[0],description:"",amount:"",type:"in",cash_type:"kas_besar",expense_type_id:""}),d=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),B=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),M=t=>{t.preventDefault(),x?C(route("bendahara.plant-transactions.update",x),{onSuccess:()=>{a(!1),l(null),o(),u.fire("Berhasil","Transaksi berhasil diperbarui","success")}}):S(route("bendahara.plant-transactions.store"),{onSuccess:()=>{a(!1),o(),u.fire("Berhasil","Transaksi berhasil dicatat","success")}})},T=t=>{l(t.id),r({transaction_date:t.transaction_date.split("T")[0],description:t.description,amount:t.amount,type:t.type,cash_type:"kas_besar",expense_type_id:t.expense_type_id||""}),a(!0)},D=t=>{u.fire({title:"Apakah Anda yakin?",text:"Data akan dihapus permanen!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!"}).then(c=>{c.isConfirmed&&g.delete(route("bendahara.plant-transactions.destroy",t),{onSuccess:()=>u.fire("Terhapus!","Data berhasil dihapus.","success")})})},y=(t="in")=>{l(null),o(),r({transaction_date:new Date().toISOString().split("T")[0],description:"",amount:"",type:t,cash_type:"kas_besar",expense_type_id:""}),a(!0)},v=(t,c)=>{g.get(route("bendahara.plant.kas-besar"),{...i,[t]:c||void 0},{preserveState:!0,replace:!0})},I=()=>{g.get(route("bendahara.plant.kas-besar"),{},{preserveState:!0,replace:!0})},L=i.type||i.expense_type_id;return e.jsxs(H,{children:[e.jsx(E,{title:"Kas Besar"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Kas Besar"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Pencatatan arus kas besar kantor plant"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>y("in"),className:"inline-flex items-center px-4 py-2 bg-emerald-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Kas Masuk"]}),e.jsxs("button",{onClick:()=>y("out"),className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Kas Keluar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-white rounded-xl border border-emerald-100 p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx("svg",{className:"h-5 w-5 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Total Kas Masuk"}),e.jsx("div",{className:"text-lg font-bold text-emerald-600",children:d(k)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white rounded-xl border border-red-100 p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-red-100",children:e.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Total Kas Keluar"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:d(w)})]})]})}),e.jsx("div",{className:`bg-gradient-to-br ${n>=0?"from-blue-50 to-white border-blue-100":"from-orange-50 to-white border-orange-100"} rounded-xl border p-5 shadow-sm`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-lg ${n>=0?"bg-blue-100":"bg-orange-100"}`,children:e.jsx("svg",{className:`h-5 w-5 ${n>=0?"text-blue-600":"text-orange-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Saldo"}),e.jsx("div",{className:`text-lg font-bold ${n>=0?"text-blue-600":"text-orange-600"}`,children:d(n)})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:i.type||"",onChange:t=>v("type",t.target.value),className:"rounded-lg border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Semua Transaksi"}),e.jsx("option",{value:"in",children:"Kas Masuk"}),e.jsx("option",{value:"out",children:"Kas Keluar"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Kategori:"}),e.jsxs("select",{value:i.expense_type_id||"",onChange:t=>v("expense_type_id",t.target.value),className:"rounded-lg border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Semua"}),b.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),L&&e.jsx("button",{onClick:I,className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium",children:"Reset Filter"})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider w-12",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Tanggal"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Keterangan"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Kategori"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-emerald-600 uppercase tracking-wider",children:"Kas Masuk"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-red-600 uppercase tracking-wider",children:"Kas Keluar"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-600 uppercase tracking-wider w-24",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:f.length>0?f.map((t,c)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:c+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:B(t.transaction_date)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.description}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.expense_type?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:t.expense_type.name}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-emerald-600",children:t.type==="in"?d(t.amount):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-red-600",children:t.type==="out"?d(t.amount):"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>T(t),className:"text-indigo-600 hover:text-indigo-900 text-xs font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>D(t.id),className:"text-red-600 hover:text-red-900 text-xs font-medium",children:"Hapus"})]})})]},t.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-4 py-12 text-center text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Belum ada transaksi. Klik tombol di atas untuk menambah."]})})})]})})})]}),e.jsx(P,{show:_,onClose:()=>{a(!1),l(null),o()},children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:x?"Edit Transaksi":s.type==="in"?"Input Kas Masuk":"Input Kas Keluar"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"date",value:"Tanggal Transaksi"}),e.jsx(j,{id:"date",type:"date",className:"mt-1 block w-full",value:s.transaction_date,onChange:t=>r("transaction_date",t.target.value),required:!0}),e.jsx(h,{message:m.transaction_date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",value:"Keterangan"}),e.jsx(j,{id:"description",className:"mt-1 block w-full",value:s.description,onChange:t=>r("description",t.target.value),placeholder:"Contoh: Transfer dari Pusat / Pembelian Material",required:!0}),e.jsx(h,{message:m.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"expense_type",value:s.type==="in"?"Sumber Dana":"Tipe"}),e.jsxs("select",{id:"expense_type",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:s.expense_type_id,onChange:t=>r("expense_type_id",t.target.value),required:!0,children:[e.jsxs("option",{value:"",children:["-- Pilih ",s.type==="in"?"Sumber Dana":"Tipe"," --"]}),b.filter(t=>t.category===s.type).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(h,{message:m.expense_type_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"amount",value:"Jumlah (Rp)"}),e.jsx(j,{id:"amount",type:"number",className:"mt-1 block w-full",value:s.amount,onChange:t=>r("amount",t.target.value),placeholder:"0",required:!0}),e.jsx(h,{message:m.amount,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(R,{onClick:()=>{a(!1),l(null),o()},children:"Batal"}),e.jsx(W,{disabled:K,children:x?"Simpan Perubahan":"Simpan Transaksi"})]})]})]})})]})}export{Z as default};
