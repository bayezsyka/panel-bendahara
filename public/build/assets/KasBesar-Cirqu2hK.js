import{r as l,u as B,j as e,H as Z}from"./app-DDkThiwp.js";import{B as ee}from"./BendaharaLayout-DkT6SKYz.js";import{M as T}from"./Modal-cheLN1Sv.js";import{I as n}from"./InputLabel-BYYSUQrg.js";import{T as d}from"./TextInput-cppD8dzz.js";import{P as h}from"./PrimaryButton-zZtWvJJz.js";import{S as g}from"./SecondaryButton-OFDyRyhG.js";import{D as ae}from"./DangerButton-lcT4Nhxp.js";import{P as se,B as te}from"./PageHeader-C2PkCXBo.js";import{D as ne}from"./DataTable-g21gu-uf.js";import{S as M}from"./Select-BzXuO149.js";import{C as re}from"./Card-CtLf2Gfr.js";/* empty css            */import"./ApplicationLogo-0iz7Fc7z.js";import"./transition-BAZ8-2fJ.js";import"./with-selector-DBl-jayN.js";function _e({transactions:L,cashSources:j,cashExpenseTypes:f,totalIn:I,totalOut:P,balance:H,filters:ie}){const[q,w]=l.useState(!1),[v,O]=l.useState("in"),[b,D]=l.useState(null),[R,m]=l.useState(!1),[C,S]=l.useState(null),{data:o,setData:r,post:A,put:E,delete:z,processing:c,errors:s,reset:K}=B({transaction_date:new Date().toISOString().split("T")[0],type:"in",cash_type:"kas_besar",amount:"",description:"",cash_source_id:"",cash_expense_type_id:""}),[F,x]=l.useState(!1),{data:k,setData:y,post:W,processing:_,errors:i,reset:V}=B({transaction_date:new Date().toISOString().split("T")[0],amount:"",description:""}),u=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),$=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),N=(a,t=null)=>{O(a),D(t),t?r({transaction_date:t.transaction_date,type:t.type,cash_type:"kas_besar",amount:t.amount,description:t.description,cash_source_id:t.cash_source_id||"",cash_expense_type_id:t.cash_expense_type_id||""}):(K(),r(Y=>({...Y,type:a,cash_type:"kas_besar",cash_source_id:a==="in"&&j.length>0?j[0].id:"",cash_expense_type_id:a==="out"&&f.length>0?f[0].id:""}))),w(!0)},p=()=>{w(!1),D(null),K()},G=a=>{a.preventDefault(),b?E(route("kas.transactions.update",b.id),{onSuccess:()=>p()}):A(route("kas.transactions.store"),{onSuccess:()=>p()})},J=a=>{a.preventDefault(),W(route("kas.transfer"),{onSuccess:()=>{x(!1),V()}})},Q=a=>{S(a),m(!0)},U=()=>{C&&z(route("kas.transactions.destroy",C.id),{onSuccess:()=>{m(!1),S(null)}})},X=[{key:"date",label:"Tanggal",render:a=>e.jsx("span",{className:"text-gray-600 whitespace-nowrap",children:$(a.transaction_date)})},{key:"category",label:"Kategori/Tipe",render:a=>e.jsxs("div",{children:[e.jsx(te,{variant:a.type==="in"?"emerald":"red",size:"md",children:a.type==="in"?"Masuk":"Keluar"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:a.type==="in"?a.cash_source?.name||"Sumber Lain":a.cash_expense_type?.name||"Biaya Lain"})]})},{key:"description",label:"Keterangan",render:a=>e.jsx("span",{className:"text-gray-800 font-medium",children:a.description})},{key:"amount",label:"Nominal",align:"right",render:a=>e.jsxs("span",{className:`font-bold whitespace-nowrap ${a.type==="in"?"text-emerald-600":"text-red-600"}`,children:[a.type==="in"?"+":"-",u(a.amount)]})},{key:"actions",label:"Aksi",align:"center",render:a=>e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("button",{onClick:()=>N(a.type,a),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>Q(a),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}];return e.jsxs(ee,{children:[e.jsx(Z,{title:"Kas Besar"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(se,{title:"Kas Besar",subtitle:"Kelola pemasukan dan pengeluaran kas besar.",backLink:route("kas.dashboard"),backLabel:"Dashboard Kas"})}),e.jsxs("div",{className:"bg-indigo-600 rounded-xl p-6 text-white shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 h-28 w-28 translate-x-8 -translate-y-8 rounded-full bg-white/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-indigo-100 text-sm font-medium uppercase tracking-wider mb-1",children:"Saldo Saat Ini"}),e.jsx("h3",{className:"text-3xl font-bold",children:u(H)})]})]})]}),e.jsxs(re,{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-1 sm:pb-0",children:[e.jsx(h,{onClick:()=>N("in"),className:"bg-emerald-600 hover:bg-emerald-700 focus:ring-emerald-500 whitespace-nowrap",children:"+ Pemasukan"}),e.jsx(h,{onClick:()=>N("out"),className:"bg-red-600 hover:bg-red-700 focus:ring-red-500 whitespace-nowrap",children:"- Pengeluaran"}),e.jsxs(g,{onClick:()=>x(!0),className:"border-indigo-200 text-indigo-700 hover:bg-indigo-50 whitespace-nowrap",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Transfer ke Kas Kecil"]})]}),e.jsxs("div",{className:"flex gap-6 text-sm whitespace-nowrap",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block text-xs",children:"Total Masuk"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:u(I)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block text-xs",children:"Total Keluar"}),e.jsx("span",{className:"font-semibold text-red-600",children:u(P)})]})]})]}),e.jsx(ne,{columns:X,data:L||[],emptyMessage:"Belum ada transaksi"})]}),e.jsx(T,{show:q,onClose:p,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:b?"Edit Transaksi":v==="in"?"Tambah Pemasukan Kas Besar":"Tambah Pengeluaran Kas Besar"}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Tanggal"}),e.jsx(d,{type:"date",className:"w-full mt-1",value:o.transaction_date,onChange:a=>r("transaction_date",a.target.value),required:!0}),s.transaction_date&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.transaction_date})]}),v==="in"?e.jsxs("div",{children:[e.jsx(n,{value:"Sumber Dana"}),e.jsx(M,{className:"mt-1",value:o.cash_source_id,onChange:a=>r("cash_source_id",a.target.value),placeholder:"-- Pilih Sumber Dana --",options:j.map(a=>({value:a.id,label:a.name})),required:!0}),s.cash_source_id&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.cash_source_id})]}):e.jsxs("div",{children:[e.jsx(n,{value:"Tipe Biaya"}),e.jsx(M,{className:"mt-1",value:o.cash_expense_type_id,onChange:a=>r("cash_expense_type_id",a.target.value),placeholder:"-- Pilih Tipe Biaya --",options:f.map(a=>({value:a.id,label:a.name})),required:!0}),s.cash_expense_type_id&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.cash_expense_type_id})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Keterangan"}),e.jsx(d,{type:"text",className:"w-full mt-1",value:o.description,onChange:a=>r("description",a.target.value),placeholder:"Contoh: Deposit dari Bank",required:!0}),s.description&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.description})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Nominal (Rp)"}),e.jsx(d,{type:"number",className:"w-full mt-1",value:o.amount,onChange:a=>r("amount",a.target.value),placeholder:"0",required:!0}),s.amount&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.amount})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(g,{onClick:p,disabled:c,children:"Batal"}),e.jsx(h,{className:v==="in"?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700",disabled:c,children:c?"Menyimpan...":"Simpan Transaksi"})]})]})]})}),e.jsx(T,{show:F,onClose:()=>x(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Transfer ke Kas Kecil"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Pindahkan dana dari Kas Besar ke Kas Kecil. Tercatat sebagai pengeluaran di Kas Besar dan pemasukan di Kas Kecil."}),e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Tanggal Transfer"}),e.jsx(d,{type:"date",className:"w-full mt-1",value:k.transaction_date,onChange:a=>y("transaction_date",a.target.value),required:!0}),i.transaction_date&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:i.transaction_date})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Keterangan / Keperluan"}),e.jsx(d,{type:"text",className:"w-full mt-1",value:k.description,onChange:a=>y("description",a.target.value),placeholder:"Contoh: Tambahan Kas Kecil",required:!0}),i.description&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:i.description})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Nominal Transfer (Rp)"}),e.jsx(d,{type:"number",className:"w-full mt-1",value:k.amount,onChange:a=>y("amount",a.target.value),placeholder:"0",required:!0}),i.amount&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:i.amount})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(g,{onClick:()=>x(!1),disabled:_,children:"Batal"}),e.jsx(h,{disabled:_,children:_?"Memproses...":"Lakukan Transfer"})]})]})]})}),e.jsx(T,{show:R,onClose:()=>m(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Hapus Transaksi?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Apakah Anda yakin? Tindakan ini tidak dapat dibatalkan."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(g,{onClick:()=>m(!1),children:"Batal"}),e.jsx(ae,{onClick:U,disabled:c,children:c?"Menghapus...":"Hapus Transaksi"})]})]})})]})}export{_e as default};
