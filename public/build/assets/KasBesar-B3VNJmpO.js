import{r as l,u as M,j as e,H as X,L as Y}from"./app-B7W7oclS.js";import{B as Z}from"./BendaharaLayout-DtlQTwzt.js";import{M as T}from"./Modal-BdkaDH1m.js";import{I as r}from"./InputLabel-BpLXTgxG.js";import{T as d}from"./TextInput-4JNY-dzr.js";import{P as u}from"./PrimaryButton-D8BSPuzh.js";import{S as g}from"./SecondaryButton-DUSan6yH.js";import{D as ee}from"./DangerButton--OH3XvDy.js";/* empty css            */import"./ApplicationLogo-Cn1AfSU7.js";import"./transition-C5nqvWym.js";import"./with-selector-DfM91umw.js";function pe({transactions:j,cashSources:f,cashExpenseTypes:v,totalIn:I,totalOut:L,balance:P,filters:ae}){const[O,D]=l.useState(!1),[y,q]=l.useState("in"),[b,S]=l.useState(null),[H,x]=l.useState(!1),[K,C]=l.useState(null),{data:o,setData:n,post:R,put:E,delete:A,processing:c,errors:s,reset:B}=M({transaction_date:new Date().toISOString().split("T")[0],type:"in",cash_type:"kas_besar",amount:"",description:"",cash_source_id:"",cash_expense_type_id:""}),[F,m]=l.useState(!1),{data:N,setData:_,post:W,processing:k,errors:i,reset:$}=M({transaction_date:new Date().toISOString().split("T")[0],amount:"",description:""}),h=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),z=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),w=(a,t=null)=>{q(a),S(t),t?n({transaction_date:t.transaction_date,type:t.type,cash_type:"kas_besar",amount:t.amount,description:t.description,cash_source_id:t.cash_source_id||"",cash_expense_type_id:t.cash_expense_type_id||""}):(B(),n(V=>({...V,type:a,cash_type:"kas_besar",cash_source_id:a==="in"&&f.length>0?f[0].id:"",cash_expense_type_id:a==="out"&&v.length>0?v[0].id:""}))),D(!0)},p=()=>{D(!1),S(null),B()},G=a=>{a.preventDefault(),b?E(route("kas.transactions.update",b.id),{onSuccess:()=>p()}):R(route("kas.transactions.store"),{onSuccess:()=>p()})},J=a=>{a.preventDefault(),W(route("kas.transfer"),{onSuccess:()=>{m(!1),$()}})},Q=a=>{C(a),x(!0)},U=()=>{K&&A(route("kas.transactions.destroy",K.id),{onSuccess:()=>{x(!1),C(null)}})};return e.jsxs(Z,{children:[e.jsx(X,{title:"Kas Besar"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{href:route("kas.dashboard"),className:"text-gray-500 hover:text-indigo-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Kas Besar"})]}),e.jsx("p",{className:"text-gray-500",children:"Kelola pemasukan dan pengeluaran kas besar."})]}),e.jsxs("div",{className:"bg-indigo-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 h-32 w-32 translate-x-8 -translate-y-8 rounded-full bg-white/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-indigo-100 text-sm font-medium uppercase tracking-wider mb-1",children:"Saldo Saat Ini"}),e.jsx("h3",{className:"text-3xl font-bold",children:h(P)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-1 sm:pb-0",children:[e.jsx(u,{onClick:()=>w("in"),className:"bg-emerald-600 hover:bg-emerald-700 focus:ring-emerald-500 whitespace-nowrap",children:"+ Pemasukan"}),e.jsx(u,{onClick:()=>w("out"),className:"bg-red-600 hover:bg-red-700 focus:ring-red-500 whitespace-nowrap",children:"- Pengeluaran"}),e.jsxs(g,{onClick:()=>m(!0),className:"border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:text-indigo-800 whitespace-nowrap",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Transfer ke Kas Kecil"]})]}),e.jsxs("div",{className:"flex gap-6 text-sm whitespace-nowrap",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block text-xs",children:"Total Masuk"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:h(I)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block text-xs",children:"Total Keluar"}),e.jsx("span",{className:"font-semibold text-red-600",children:h(L)})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Kategori/Tipe"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Keterangan"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-right",children:"Nominal"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:j&&j.length>0?j.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 whitespace-nowrap",children:z(a.transaction_date)}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.type==="in"?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"}`,children:a.type==="in"?"Masuk":"Keluar"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:a.type==="in"?a.cash_source?.name||"Sumber Lain":a.cash_expense_type?.name||"Biaya Lain"})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-800 font-medium",children:a.description}),e.jsxs("td",{className:`px-6 py-4 text-sm font-bold text-right whitespace-nowrap ${a.type==="in"?"text-emerald-600":"text-red-600"}`,children:[a.type==="in"?"+":"-",h(a.amount)]}),e.jsxs("td",{className:"px-6 py-4 text-center whitespace-nowrap",children:[e.jsx("button",{onClick:()=>w(a.type,a),className:"text-indigo-600 hover:text-indigo-900 mx-2 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>Q(a),className:"text-red-600 hover:text-red-900 mx-2 text-sm",children:"Hapus"})]})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500 italic",children:"Belum ada transaksi"})})})]})})})]}),e.jsx(T,{show:O,onClose:p,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:b?"Edit Transaksi":y==="in"?"Tambah Pemasukan Kas Besar":"Tambah Pengeluaran Kas Besar"}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Tanggal"}),e.jsx(d,{type:"date",className:"w-full mt-1",value:o.transaction_date,onChange:a=>n("transaction_date",a.target.value),required:!0}),s.transaction_date&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.transaction_date})]}),y==="in"?e.jsxs("div",{children:[e.jsx(r,{value:"Sumber Dana"}),e.jsxs("select",{className:"w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:o.cash_source_id,onChange:a=>n("cash_source_id",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Sumber Dana --"}),f.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),s.cash_source_id&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.cash_source_id})]}):e.jsxs("div",{children:[e.jsx(r,{value:"Tipe Biaya"}),e.jsxs("select",{className:"w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:o.cash_expense_type_id,onChange:a=>n("cash_expense_type_id",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Tipe Biaya --"}),v.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),s.cash_expense_type_id&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.cash_expense_type_id})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Keterangan"}),e.jsx(d,{type:"text",className:"w-full mt-1",value:o.description,onChange:a=>n("description",a.target.value),placeholder:"Contoh: Deposit dari Bank / Biaya Operasional",required:!0}),s.description&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.description})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Nominal (Rp)"}),e.jsx(d,{type:"number",className:"w-full mt-1",value:o.amount,onChange:a=>n("amount",a.target.value),placeholder:"0",required:!0}),s.amount&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:s.amount})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(g,{onClick:p,disabled:c,children:"Batal"}),e.jsx(u,{className:y==="in"?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700",disabled:c,children:c?"Menyimpan...":"Simpan Transaksi"})]})]})]})}),e.jsx(T,{show:F,onClose:()=>m(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Transfer ke Kas Kecil"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Pindahkan dana dari Kas Besar ke Kas Kecil. Transaksi ini akan tercatat sebagai pengeluaran di Kas Besar dan pemasukan di Kas Kecil."}),e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Tanggal Transfer"}),e.jsx(d,{type:"date",className:"w-full mt-1",value:N.transaction_date,onChange:a=>_("transaction_date",a.target.value),required:!0}),i.transaction_date&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:i.transaction_date})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Keterangan / Keperluan"}),e.jsx(d,{type:"text",className:"w-full mt-1",value:N.description,onChange:a=>_("description",a.target.value),placeholder:"Contoh: Tambahan Kas Kecil Minggu Ini",required:!0}),i.description&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:i.description})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Nominal Transfer (Rp)"}),e.jsx(d,{type:"number",className:"w-full mt-1",value:N.amount,onChange:a=>_("amount",a.target.value),placeholder:"0",required:!0}),i.amount&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:i.amount})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(g,{onClick:()=>m(!1),disabled:k,children:"Batal"}),e.jsx(u,{className:"bg-indigo-600 hover:bg-indigo-700",disabled:k,children:k?"Memproses Transfer...":"Lakukan Transfer"})]})]})]})}),e.jsx(T,{show:H,onClose:()=>x(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hapus Transaksi?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Apakah Anda yakin ingin menghapus transaksi ini? Tindakan ini tidak dapat dibatalkan."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(g,{onClick:()=>x(!1),children:"Batal"}),e.jsx(ee,{onClick:U,disabled:c,children:c?"Menghapus...":"Hapus Transaksi"})]})]})})]})}export{pe as default};
