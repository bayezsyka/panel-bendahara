import{f as R,g as pe,r as q,u as ve,d as je,c as B,j as e,H as ye,L as Ne}from"./app-BqN6F9dy.js";import{B as we,S as ke}from"./BendaharaLayout-D3ga0I3T.js";import{M as Se}from"./Modal-C7ren_PA.js";import{I as Q}from"./InputLabel-B-3BvCcX.js";import{T as M}from"./TextInput-Dke2LS8_.js";import{I as Z}from"./InputError-BhlZm1d8.js";import{P as ee}from"./PrimaryButton-DxBn27In.js";import{S as Te}from"./SecondaryButton-BwFT-TUm.js";/* empty css            */import"./ApplicationLogo-BCAV9GLV.js";import"./transition-C1YzXvQm.js";import"./with-selector-BF-W_PL3.js";var D,te;function fe(){if(te)return D;te=1;function a(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}return D=a,D}var A,re;function _e(){if(re)return A;re=1;var a=typeof R=="object"&&R&&R.Object===Object&&R;return A=a,A}var P,ae;function he(){if(ae)return P;ae=1;var a=_e(),r=typeof self=="object"&&self&&self.Object===Object&&self,s=a||r||Function("return this")();return P=s,P}var F,ne;function Ce(){if(ne)return F;ne=1;var a=he(),r=function(){return a.Date.now()};return F=r,F}var G,se;function Ie(){if(se)return G;se=1;var a=/\s/;function r(s){for(var o=s.length;o--&&a.test(s.charAt(o)););return o}return G=r,G}var W,oe;function Le(){if(oe)return W;oe=1;var a=Ie(),r=/^\s+/;function s(o){return o&&o.slice(0,a(o)+1).replace(r,"")}return W=s,W}var H,ie;function be(){if(ie)return H;ie=1;var a=he(),r=a.Symbol;return H=r,H}var U,le;function Oe(){if(le)return U;le=1;var a=be(),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,l=a?a.toStringTag:void 0;function f(m){var c=s.call(m,l),d=m[l];try{m[l]=void 0;var n=!0}catch{}var u=o.call(m);return n&&(c?m[l]=d:delete m[l]),u}return U=f,U}var V,ce;function Re(){if(ce)return V;ce=1;var a=Object.prototype,r=a.toString;function s(o){return r.call(o)}return V=s,V}var $,de;function qe(){if(de)return $;de=1;var a=be(),r=Oe(),s=Re(),o="[object Null]",l="[object Undefined]",f=a?a.toStringTag:void 0;function m(c){return c==null?c===void 0?l:o:f&&f in Object(c)?r(c):s(c)}return $=m,$}var z,ue;function Be(){if(ue)return z;ue=1;function a(r){return r!=null&&typeof r=="object"}return z=a,z}var K,me;function Ee(){if(me)return K;me=1;var a=qe(),r=Be(),s="[object Symbol]";function o(l){return typeof l=="symbol"||r(l)&&a(l)==s}return K=o,K}var X,xe;function Me(){if(xe)return X;xe=1;var a=Le(),r=fe(),s=Ee(),o=NaN,l=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,m=/^0o[0-7]+$/i,c=parseInt;function d(n){if(typeof n=="number")return n;if(s(n))return o;if(r(n)){var u=typeof n.valueOf=="function"?n.valueOf():n;n=r(u)?u+"":u}if(typeof n!="string")return n===0?n:+n;n=a(n);var g=f.test(n);return g||m.test(n)?c(n.slice(2),g?2:8):l.test(n)?o:+n}return X=d,X}var Y,ge;function De(){if(ge)return Y;ge=1;var a=fe(),r=Ce(),s=Me(),o="Expected a function",l=Math.max,f=Math.min;function m(c,d,n){var u,g,k,b,x,h,N=0,C=!1,w=!1,S=!0;if(typeof c!="function")throw new TypeError(o);d=s(d)||0,a(n)&&(C=!!n.leading,w="maxWait"in n,k=w?l(s(n.maxWait)||0,d):k,S="trailing"in n?!!n.trailing:S);function T(i){var y=u,_=g;return u=g=void 0,N=i,b=c.apply(_,y),b}function E(i){return N=i,x=setTimeout(j,d),C?T(i):b}function I(i){var y=i-h,_=i-N,J=d-y;return w?f(J,k-_):J}function L(i){var y=i-h,_=i-N;return h===void 0||y>=d||y<0||w&&_>=k}function j(){var i=r();if(L(i))return O(i);x=setTimeout(j,I(i))}function O(i){return x=void 0,S&&u?T(i):(u=g=void 0,b)}function t(){x!==void 0&&clearTimeout(x),N=0,u=h=g=x=void 0}function p(){return x===void 0?b:O(r())}function v(){var i=r(),y=L(i);if(u=arguments,g=this,h=i,y){if(x===void 0)return E(h);if(w)return clearTimeout(x),x=setTimeout(j,d),T(h)}return x===void 0&&(x=setTimeout(j,d)),b}return v.cancel=t,v.flush=p,v}return Y=m,Y}var Ae=De();const Pe=pe(Ae);function Qe({customers:a=[],filters:r={}}){const[s,o]=q.useState(!1),{data:l,setData:f,post:m,processing:c,errors:d,reset:n,clearErrors:u}=ve({name:"",contact:""}),[g,k]=q.useState(r?.search||""),[b,x]=q.useState(r?.status||""),[h,N]=q.useState(typeof r?.sort=="string"?r.sort:"updated_at"),C=je.useCallback(Pe((t,p,v)=>{B.get(route("receivable.customers.index"),{search:t,status:p,sort:v},{preserveState:!0,replace:!0})},300),[]),w=t=>{const p=t.target.value;k(p),C(p,b,h)},S=t=>{x(t),B.get(route("receivable.customers.index"),{search:g,status:t,sort:h},{preserveState:!0,replace:!0})},T=t=>{N(t),B.get(route("receivable.customers.index"),{search:g,status:b,sort:t},{preserveState:!0,replace:!0})},E=()=>{ke.fire({title:"RESET DATA PIUTANG?",text:"PERINGATAN: Ini akan menghapus SEMUA data Customer dan Transaksi Piutang. ID akan di-reset dari awal. Data tidak bisa dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"YA, RESET SEMUA!",cancelButtonText:"Batal",focusCancel:!0}).then(t=>{t.isConfirmed&&B.post(route("receivable.customers.reset-all"))})},I=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),L=()=>{o(!0),n(),u()},j=()=>{o(!1),n(),u()},O=t=>{t.preventDefault(),m(route("receivable.customers.store"),{onSuccess:()=>j()})};return e.jsxs(we,{children:[e.jsx(ye,{title:"Customer Piutang"}),e.jsx("div",{className:"pt-6 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4 px-4 sm:px-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:"Daftar Customer"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 font-medium whitespace-nowrap",children:"Monitoring piutang dan history transaksi pelanggan."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:E,className:"inline-flex items-center px-4 py-2 bg-white border border-red-100 rounded-xl font-bold text-xs text-red-600 uppercase tracking-widest hover:bg-red-50 transition-all shadow-sm",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})}),"Reset"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-white border border-gray-100 rounded-xl font-bold text-xs text-gray-700 uppercase tracking-widest hover:bg-gray-50 transition-all shadow-sm gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export PDF",e.jsx("svg",{className:"w-3 h-3 text-gray-400 group-hover:rotate-180 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-2xl shadow-xl border border-gray-100 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 transform group-hover:translate-y-0 translate-y-2",children:[e.jsxs("a",{href:route("receivable.export-pdf",{status:"all"}),target:"_blank",className:"flex items-center gap-3 px-4 py-2.5 text-xs font-bold text-gray-600 hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400"}),"Semua Customer"]}),e.jsxs("a",{href:route("receivable.export-pdf",{status:"lunas"}),target:"_blank",className:"flex items-center gap-3 px-4 py-2.5 text-xs font-bold text-gray-600 hover:bg-indigo-50 hover:text-emerald-600 transition-colors border-t border-gray-50",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"Sudah Lunas"]}),e.jsxs("a",{href:route("receivable.export-pdf",{status:"belum_lunas"}),target:"_blank",className:"flex items-center gap-3 px-4 py-2.5 text-xs font-bold text-gray-600 hover:bg-indigo-50 hover:text-rose-600 transition-colors border-t border-gray-50",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-500"}),"Belum Lunas"]})]})]}),e.jsx(ee,{onClick:L,className:"!rounded-xl !py-2.5 !px-5 shadow-md shadow-indigo-100 hover:shadow-lg transition-all active:scale-95 text-[11px] !font-black !uppercase tracking-widest",children:"+ Customer"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 mb-6 flex flex-col md:flex-row gap-4 justify-between items-center transition-all hover:shadow-md",children:[e.jsxs("div",{className:"w-full md:w-1/3 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 group-focus-within:text-indigo-500 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx(M,{type:"text",className:"w-full pl-10 !rounded-xl !border-gray-100 focus:!border-indigo-300 focus:!ring-indigo-100 transition-all",placeholder:"Cari nama atau kontak...",value:g,onChange:w})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[e.jsxs("select",{value:b,onChange:t=>S(t.target.value),className:"border-gray-100 focus:border-indigo-300 focus:ring-indigo-100 rounded-xl shadow-sm text-sm font-semibold text-gray-700 bg-gray-50/50",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"belum_lunas",children:"Belum Lunas"}),e.jsx("option",{value:"lunas",children:"Lunas"})]}),e.jsxs("select",{value:h,onChange:t=>T(t.target.value),className:"border-gray-100 focus:border-indigo-300 focus:ring-indigo-100 rounded-xl shadow-sm text-sm font-semibold text-gray-700 bg-gray-50/50",children:[e.jsx("option",{value:"updated_at",children:"Terbaru Diupdate"}),e.jsx("option",{value:"created_at",children:"Terbaru Dibuat"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(t=>{const p=(t.receivable_transactions_sum_bill_amount||0)-(t.receivable_transactions_sum_payment_amount||0),v=p<=0,i=parseFloat(t.receivable_transactions_sum_volume)||0;return e.jsxs(Ne,{href:route("receivable.customers.show",t.id),className:"block bg-white overflow-hidden shadow-sm sm:rounded-2xl p-6 border border-gray-100 hover:shadow-xl hover:border-indigo-200 transition-all duration-300 hover:-translate-y-2 relative group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsxs("div",{className:"bg-indigo-50 text-indigo-600 text-[10px] font-black px-2 py-1 rounded-lg min-w-[2rem] text-center border border-indigo-100",children:["ID-",t.id]}),e.jsx("h3",{className:"text-lg font-black text-gray-800 truncate group-hover:text-indigo-600 transition-colors tracking-tight",title:t.name,children:t.name})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black whitespace-nowrap ml-2 shadow-sm ${v?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"}`,children:v?"LUNAS":"BELUM"})]}),e.jsxs("div",{className:"space-y-3.5",children:[t.contact?e.jsxs("div",{className:"text-xs font-semibold text-gray-400 bg-gray-50 px-3 py-1.5 rounded-lg flex items-center gap-2 w-fit",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.contact]}):e.jsx("div",{className:"h-7 text-xs italic text-gray-300",children:"Kontak tidak tersedia"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 py-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter",children:"Total Volume"}),e.jsxs("span",{className:"font-extrabold text-gray-700 text-sm",children:[i.toLocaleString("id-ID")," mÂ³"]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter text-right",children:"Pembayaran"}),e.jsx("span",{className:"font-extrabold text-emerald-600 text-sm",children:I(t.receivable_transactions_sum_payment_amount||0)})]})]}),e.jsxs("div",{className:"pt-4 mt-2 border-t border-gray-100 flex justify-between items-center group-hover:bg-indigo-50/10 transition-colors",children:[e.jsx("span",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Sisa Hutang"}),e.jsx("span",{className:`text-lg font-black tracking-tighter ${v?"text-gray-300":"text-rose-600"}`,children:I(p)})]})]}),e.jsx("div",{className:"absolute right-3 top-[43%] translate-x-4 opacity-0 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 text-indigo-400",children:e.jsx("svg",{className:"w-10 h-10 stroke-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 5l7 7-7 7"})})})]},t.id)}),a.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"Belum ada data customer."})})]})]})}),e.jsx(Se,{show:s,onClose:j,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tambah Customer Baru"}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"name",value:"Nama Customer"}),e.jsx(M,{id:"name",type:"text",name:"name",value:l.name,className:"mt-1 block w-full",isFocused:!0,onChange:t=>f("name",t.target.value),placeholder:"PT. Kontraktor Sejahtera"}),e.jsx(Z,{message:d.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"contact",value:"Kontak / No. HP (Optional)"}),e.jsx(M,{id:"contact",type:"text",name:"contact",value:l.contact,className:"mt-1 block w-full",onChange:t=>f("contact",t.target.value),placeholder:"08123456789"}),e.jsx(Z,{message:d.contact,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(Te,{onClick:j,disabled:c,children:"Batal"}),e.jsx(ee,{disabled:c,children:"Simpan Customer"})]})]})]})})]})}export{Qe as default};
