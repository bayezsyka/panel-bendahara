import{r as n,u as E,j as e,H as F,L as $}from"./app-B7W7oclS.js";import{B as z}from"./BendaharaLayout-DtlQTwzt.js";import{M as k}from"./Modal-BdkaDH1m.js";import{I as d}from"./InputLabel-BpLXTgxG.js";import{T as j}from"./TextInput-4JNY-dzr.js";import{P as w}from"./PrimaryButton-D8BSPuzh.js";import{S as T}from"./SecondaryButton-DUSan6yH.js";import{D as W}from"./DangerButton--OH3XvDy.js";/* empty css            */import"./ApplicationLogo-Cn1AfSU7.js";import"./transition-C5nqvWym.js";import"./with-selector-DfM91umw.js";function re({transactions:m,cashSources:p,cashExpenseTypes:h,totalIn:D,totalOut:S,balance:K,filters:G}){const[C,y]=n.useState(!1),[u,B]=n.useState("in"),[g,f]=n.useState(null),[M,c]=n.useState(!1),[v,N]=n.useState(null),{data:r,setData:i,post:I,put:L,delete:P,processing:l,errors:a,reset:b}=E({transaction_date:new Date().toISOString().split("T")[0],type:"in",cash_type:"kas_kecil",amount:"",description:"",cash_source_id:"",cash_expense_type_id:""}),o=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),q=s=>new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),_=(s,t=null)=>{B(s),f(t),t?i({transaction_date:t.transaction_date,type:t.type,cash_type:"kas_kecil",amount:t.amount,description:t.description,cash_source_id:t.cash_source_id||"",cash_expense_type_id:t.cash_expense_type_id||""}):(b(),i(R=>({...R,type:s,cash_type:"kas_kecil",cash_source_id:s==="in"&&p.length>0?p[0].id:"",cash_expense_type_id:s==="out"&&h.length>0?h[0].id:""}))),y(!0)},x=()=>{y(!1),f(null),b()},H=s=>{s.preventDefault(),g?L(route("kas.transactions.update",g.id),{onSuccess:()=>x()}):I(route("kas.transactions.store"),{onSuccess:()=>x()})},O=s=>{N(s),c(!0)},A=()=>{v&&P(route("kas.transactions.destroy",v.id),{onSuccess:()=>{c(!1),N(null)}})};return e.jsxs(z,{children:[e.jsx(F,{title:"Kas Kecil"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{href:route("kas.dashboard"),className:"text-gray-500 hover:text-purple-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Kas Kecil"})]}),e.jsx("p",{className:"text-gray-500",children:"Kelola pemasukan dan pengeluaran kas kecil."})]}),e.jsxs("div",{className:"bg-purple-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 h-32 w-32 translate-x-8 -translate-y-8 rounded-full bg-white/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium uppercase tracking-wider mb-1",children:"Saldo Saat Ini"}),e.jsx("h3",{className:"text-3xl font-bold",children:o(K)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"flex gap-3",children:e.jsx(w,{onClick:()=>_("out"),className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"- Pengeluaran"})}),e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block text-xs",children:"Total Masuk"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:o(D)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block text-xs",children:"Total Keluar"}),e.jsx("span",{className:"font-semibold text-red-600",children:o(S)})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Kategori/Tipe"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Keterangan"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-right",children:"Nominal"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:m&&m.length>0?m.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 whitespace-nowrap",children:q(s.transaction_date)}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.type==="in"?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"}`,children:s.type==="in"?"Masuk":"Keluar"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:s.type==="in"?s.cash_source?.name||"Internal Transfer/Lainnya":s.cash_expense_type?.name||"Biaya Lain"})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-800 font-medium",children:s.description}),e.jsxs("td",{className:`px-6 py-4 text-sm font-bold text-right whitespace-nowrap ${s.type==="in"?"text-emerald-600":"text-red-600"}`,children:[s.type==="in"?"+":"-",o(s.amount)]}),e.jsxs("td",{className:"px-6 py-4 text-center whitespace-nowrap",children:[e.jsx("button",{onClick:()=>_(s.type,s),className:"text-indigo-600 hover:text-indigo-900 mx-2 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>O(s),className:"text-red-600 hover:text-red-900 mx-2 text-sm",children:"Hapus"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500 italic",children:"Belum ada transaksi"})})})]})})})]}),e.jsx(k,{show:C,onClose:x,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:g?"Edit Transaksi":u==="in"?"Tambah Pemasukan Kas Kecil":"Tambah Pengeluaran Kas Kecil"}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{value:"Tanggal"}),e.jsx(j,{type:"date",className:"w-full mt-1",value:r.transaction_date,onChange:s=>i("transaction_date",s.target.value),required:!0}),a.transaction_date&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:a.transaction_date})]}),u==="in"?e.jsxs("div",{children:[e.jsx(d,{value:"Sumber Dana"}),e.jsxs("select",{className:"w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:r.cash_source_id,onChange:s=>i("cash_source_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Sumber Dana --"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),a.cash_source_id&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:a.cash_source_id})]}):e.jsxs("div",{children:[e.jsx(d,{value:"Tipe Biaya"}),e.jsxs("select",{className:"w-full mt-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:r.cash_expense_type_id,onChange:s=>i("cash_expense_type_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Tipe Biaya --"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),a.cash_expense_type_id&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:a.cash_expense_type_id})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Keterangan"}),e.jsx(j,{type:"text",className:"w-full mt-1",value:r.description,onChange:s=>i("description",s.target.value),placeholder:"Contoh: Dropping dari Kas Besar / Beli ATK",required:!0}),a.description&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:a.description})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Nominal (Rp)"}),e.jsx(j,{type:"number",className:"w-full mt-1",value:r.amount,onChange:s=>i("amount",s.target.value),placeholder:"0",required:!0}),a.amount&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:a.amount})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(T,{onClick:x,disabled:l,children:"Batal"}),e.jsx(w,{className:u==="in"?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700",disabled:l,children:l?"Menyimpan...":"Simpan Transaksi"})]})]})]})}),e.jsx(k,{show:M,onClose:()=>c(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hapus Transaksi?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Apakah Anda yakin ingin menghapus transaksi ini? Tindakan ini tidak dapat dibatalkan."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(T,{onClick:()=>c(!1),children:"Batal"}),e.jsx(W,{onClick:A,disabled:l,children:l?"Menghapus...":"Hapus Transaksi"})]})]})})]})}export{re as default};
