import{u as I,r as d,j as e,H as B,L as f}from"./app-DteqDP6z.js";import{B as L}from"./BendaharaLayout-Y4eYKbl_.js";import{I as i}from"./InputLabel-Ud7_2xCW.js";import{T as m}from"./TextInput-BES_4MaH.js";import{P as O}from"./PrimaryButton-DDpf5jRw.js";import{I as o}from"./InputError-Cg1LX1Eh.js";import{X as x}from"./disclosure-C2BnzcXY.js";/* empty css            */import"./ApplicationLogo-CFUqUAf-.js";import"./use-resolve-button-type-eEx3CkTO.js";import"./keyboard-BygUKIa8.js";import"./use-sync-refs-DPG-LCFQ.js";import"./open-closed-BdKgPkKs.js";import"./close-provider-PEpNyiF9.js";function G({project:a}){const{data:t,setData:r,post:b,processing:g,errors:l}=I({delivery_project_id:a.id,date:new Date().toISOString().split("T")[0],docket_number:"",vehicle_number:"",driver_name:"",volume_pumped:"",pipes_used:"",notes:""}),[_,j]=d.useState(0),[p,N]=d.useState(0),[u,y]=d.useState(0),c=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s);d.useEffect(()=>{const s=parseFloat(t.volume_pumped)||0,n=parseInt(t.pipes_used)||0,k=parseFloat(a.pump_limit_volume)||0,P=parseInt(a.pump_limit_pipe)||0,F=parseFloat(a.pump_rental_price)||0,C=parseFloat(a.pump_over_volume_price)||0,T=parseFloat(a.pump_over_pipe_price)||0,v=Math.max(0,s-k),h=Math.max(0,n-P);N(v),y(h);const S=F+v*C+h*T;j(S)},[t.volume_pumped,t.pipes_used,a]);const w=s=>{s.preventDefault(),b(route("delivery.pump-rentals.store"))};return e.jsxs(L,{children:[e.jsx(B,{title:`Sewa Pompa: ${a.name}`}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs(f,{href:route("delivery.projects.show",a.slug),className:"text-sm text-indigo-600 hover:text-indigo-900 flex items-center gap-1 mb-2 font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali ke Proyek"]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Catat Sewa Pompa"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Proyek: ",e.jsx("span",{className:"font-semibold",children:a.name})]})]}),e.jsxs("form",{onSubmit:w,className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"date",value:"Tanggal Sewa"}),e.jsx(m,{id:"date",type:"date",className:"w-full mt-1",value:t.date,onChange:s=>r("date",s.target.value),required:!0}),e.jsx(o,{message:l.date,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"docket_number",value:"No. Surat Jalan / Tiket (Opsional)"}),e.jsx(m,{id:"docket_number",type:"text",className:"w-full mt-1",value:t.docket_number,onChange:s=>r("docket_number",s.target.value),placeholder:"Nomor Tiket..."}),e.jsx(o,{message:l.docket_number,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"vehicle_number",value:"No. Polisi Truk Pompa"}),e.jsx(m,{id:"vehicle_number",type:"text",className:"w-full mt-1",value:t.vehicle_number,onChange:s=>r("vehicle_number",s.target.value),placeholder:"Contoh: B 1234 CD"}),e.jsx(o,{message:l.vehicle_number,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"driver_name",value:"Nama Operator / Supir"}),e.jsx(m,{id:"driver_name",type:"text",className:"w-full mt-1",value:t.driver_name,onChange:s=>r("driver_name",s.target.value),placeholder:"Nama Operator"}),e.jsx(o,{message:l.driver_name,className:"mt-1"})]})]}),e.jsx(x,{children:({open:s})=>e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs(x.Button,{className:"flex w-full justify-between rounded-lg bg-gray-50 px-4 py-3 text-left text-sm font-medium text-gray-900 hover:bg-gray-100 focus:outline-none focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Advanced: Input Volume & Pipa Tambahan"}),(t.volume_pumped||t.pipes_used)&&e.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-[10px] px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:"Active"})]}),e.jsx("svg",{className:`${s?"rotate-180 transform":""} h-5 w-5 text-gray-500 transition-transform`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})]}),e.jsx(x.Panel,{className:"px-4 pt-4 pb-4 text-sm text-gray-500 bg-white rounded-b-lg border-t border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"volume_pumped",value:"Total Volume Dipompa (m³)"}),e.jsx(m,{id:"volume_pumped",type:"number",step:"0.01",className:"w-full mt-1",value:t.volume_pumped,onChange:n=>r("volume_pumped",n.target.value),placeholder:"0"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Limit: ",a.pump_limit_volume," m³.",p>0&&e.jsxs("span",{className:"text-red-600 font-bold ml-1",children:["Over: ",p.toFixed(2)," m³ (+ ",c(p*a.pump_over_volume_price),")"]})]}),e.jsx(o,{message:l.volume_pumped,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"pipes_used",value:"Total Pipa Terpakai (Batang)"}),e.jsx(m,{id:"pipes_used",type:"number",className:"w-full mt-1",value:t.pipes_used,onChange:n=>r("pipes_used",n.target.value),placeholder:"0"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Limit: ",a.pump_limit_pipe," btg.",u>0&&e.jsxs("span",{className:"text-red-600 font-bold ml-1",children:["Over: ",u," btg (+ ",c(u*a.pump_over_pipe_price),")"]})]}),e.jsx(o,{message:l.pipes_used,className:"mt-1"})]})]})})]})}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notes",value:"Catatan Tambahan (Opsional)"}),e.jsx("textarea",{id:"notes",className:"w-full mt-1 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:"3",value:t.notes,onChange:s=>r("notes",s.target.value),placeholder:"Tulis catatan jika ada..."}),e.jsx(o,{message:l.notes,className:"mt-1"})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-100",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Estimasi Total:"}),e.jsx("span",{className:"ml-2 text-lg font-bold text-gray-900",children:c(_)})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{href:route("delivery.projects.show",a.slug),className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-xs font-semibold uppercase tracking-widest text-gray-700 shadow-sm transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Batal"}),e.jsx(O,{className:"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500",disabled:g,children:g?"Menyimpan...":"Simpan Sewa Pompa"})]})]})]})]})]})}export{G as default};
