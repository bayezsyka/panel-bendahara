import{b as O,r as a,R,a as L,u as q,j as e,H as K}from"./app-1GuRuwXM.js";import{B as $}from"./BendaharaLayout-azH27Bhb.js";import{S as z}from"./SearchInput-VdKusAVh.js";import{M as v}from"./Modal-BxR1ZytI.js";import{I as y}from"./InputLabel-DM71_Qhi.js";import{T as b}from"./TextInput-B1b_5vwn.js";import{P as N}from"./PrimaryButton-8e92Z_qi.js";import{S as _}from"./SecondaryButton-DfEV9W92.js";import{D as G}from"./DangerButton-BJLlrHbk.js";import{I as k}from"./InputError-CStixvMr.js";/* empty css            */import"./ApplicationLogo-ji5Nsjxc.js";import"./transition-CrexFo9_.js";import"./use-sync-refs-j05iY-EP.js";import"./open-closed-JmYsaq0p.js";import"./keyboard-7ucfL_9T.js";import"./with-selector-DWV7iKPJ.js";import"./description-C1II6esh.js";import"./close-provider-DUthU0z7.js";function me({trucks:m,filters:x={}}){const{auth:S}=O().props,{can_create:T,can_edit:w,can_delete:C}=S.permissions||{},[r,M]=a.useState(x.search||"");R.useEffect(()=>{const s=setTimeout(()=>{r!==(x.search||"")&&L.get(route("delivery.trucks.index"),{search:r},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},[r]);const[D,u]=a.useState(!1),[c,d]=a.useState(null),[B,i]=a.useState(!1),[p,h]=a.useState(null),{data:o,setData:l,post:I,put:A,delete:E,processing:t,errors:f,reset:g}=q({vehicle_number:"",driver_name:"",is_active:!0}),j=(s=null)=>{s?(d(s),l({vehicle_number:s.vehicle_number,driver_name:s.driver_name||"",is_active:s.is_active})):(d(null),g()),u(!0)},n=()=>{u(!1),d(null),g()},H=s=>{s.preventDefault(),c?A(route("delivery.trucks.update",c.id),{onSuccess:()=>n()}):I(route("delivery.trucks.store"),{onSuccess:()=>n()})},P=s=>{h(s),i(!0)},F=()=>{p&&E(route("delivery.trucks.destroy",p.id),{onSuccess:()=>{i(!1),h(null)}})};return e.jsxs($,{children:[e.jsx(K,{title:"Master Mobil Molen (Truck)"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Mobil Molen (Truck)"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Kelola daftar mobil molen dan supir default"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{value:r,onChange:M,placeholder:"Cari truck..."}),T&&e.jsx(N,{onClick:()=>j(),children:"+ Tambah Truck"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"No. Polisi"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Supir Default"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:m.length>0?m.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:s.vehicle_number}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 icon-font",children:s.driver_name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?"Aktif":"Non-Aktif"})}),e.jsx("td",{className:"px-6 py-4 text-center whitespace-nowrap",children:e.jsxs("div",{className:"flex justify-center flex-wrap gap-2",children:[w&&e.jsx("button",{onClick:()=>j(s),className:"text-indigo-600 hover:text-indigo-900 text-sm font-medium",children:"Edit"}),C&&e.jsx("button",{onClick:()=>P(s),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Hapus"})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-500 italic",children:"Belum ada data truck"})})})]})})]}),e.jsx(v,{show:D,onClose:n,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:c?"Edit Truck":"Tambah Truck"}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"vehicle_number",value:"No. Polisi"}),e.jsx(b,{id:"vehicle_number",type:"text",className:"w-full mt-1",value:o.vehicle_number,onChange:s=>l("vehicle_number",s.target.value),placeholder:"Contoh: B 1234 ABC",required:!0}),e.jsx(k,{message:f.vehicle_number,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"driver_name",value:"Supir Default"}),e.jsx(b,{id:"driver_name",type:"text",className:"w-full mt-1",value:o.driver_name,onChange:s=>l("driver_name",s.target.value),placeholder:"Nama Supir"}),e.jsx(k,{message:f.driver_name,className:"mt-1"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:o.is_active,onChange:s=>l("is_active",s.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Aktif"})]})}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(_,{onClick:n,disabled:t,children:"Batal"}),e.jsx(N,{disabled:t,children:t?"Menyimpan...":"Simpan"})]})]})]})}),e.jsx(v,{show:B,onClose:()=>i(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hapus Truck?"}),e.jsx("p",{className:"text-gray-600 mb-6 font-medium",children:"Apakah Anda yakin ingin menghapus truck ini? Tindakan ini tidak dapat dibatalkan."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{onClick:()=>i(!1),children:"Batal"}),e.jsx(G,{onClick:F,disabled:t,children:t?"Menghapus...":"Hapus"})]})]})})]})}export{me as default};
