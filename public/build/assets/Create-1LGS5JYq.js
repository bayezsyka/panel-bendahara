import{u as w,r as k,j as e,H as C,L as h}from"./app-1GuRuwXM.js";import{B as F}from"./BendaharaLayout-azH27Bhb.js";import{I as l}from"./InputLabel-DM71_Qhi.js";import{T as o}from"./TextInput-B1b_5vwn.js";import{P}from"./PrimaryButton-8e92Z_qi.js";import{I as n}from"./InputError-CStixvMr.js";/* empty css            */import"./ApplicationLogo-ji5Nsjxc.js";function H({projects:m,concreteGrades:c,trucks:u,selectedProjectId:p,defaultValues:g}){const{data:a,setData:s,post:v,processing:x,errors:i}=w({delivery_project_id:p||"",date:new Date().toISOString().split("T")[0],docket_number:"",rit_number:"",concrete_grade_id:g?.concrete_grade_id||"",delivery_truck_id:"",slump:"12 +/- 2",volume:"",vehicle_number:"",driver_name:"",price_per_m3:g?.price_per_m3||0,total_price:0,notes:""});k.useEffect(()=>{const r=parseFloat(a.volume||0)*parseFloat(a.price_per_m3||0);s("total_price",r)},[a.volume,a.price_per_m3]);const _=r=>{s("delivery_project_id",r);const t=m.find(d=>d.id===parseInt(r));if(t&&t.default_concrete_grade_id){s("concrete_grade_id",t.default_concrete_grade_id);const d=c.find(N=>N.id===t.default_concrete_grade_id);d&&s("price_per_m3",d.price)}},j=r=>{s("concrete_grade_id",r);const t=c.find(d=>d.id===parseInt(r));t&&s("price_per_m3",t.price)},f=r=>{const t=u?.find(d=>d.id===parseInt(r));s(t?d=>({...d,delivery_truck_id:t.id,vehicle_number:t.vehicle_number,driver_name:t.driver_name||""}):d=>({...d,delivery_truck_id:""}))},b=r=>{r.preventDefault(),v(route("delivery.shipments.store"))},y=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r);return e.jsxs(F,{children:[e.jsx(C,{title:"Catat Pengiriman Baru"}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(h,{href:a.delivery_project_id?route("delivery.projects.show",m.find(r=>r.id==a.delivery_project_id)?.slug||"#"):route("delivery.shipments.index"),className:"text-sm text-indigo-600 hover:text-indigo-900 flex items-center gap-1 mb-2 font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali"]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Catat Pengiriman"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Input data pengiriman harian (Docket/Tiket)"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"delivery_project_id",value:"Proyek"}),e.jsxs("select",{id:"delivery_project_id",className:"w-full mt-1 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.delivery_project_id,onChange:r=>_(r.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Proyek --"}),m.map(r=>e.jsxs("option",{value:r.id,children:[r.name," (",r.customer.name,")"]},r.id))]}),e.jsx(n,{message:i.delivery_project_id,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"date",value:"Tanggal Pengiriman"}),e.jsx(o,{id:"date",type:"date",className:"w-full mt-1",value:a.date,onChange:r=>s("date",r.target.value),required:!0}),e.jsx(n,{message:i.date,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"docket_number",value:"Docket Number / Tiket"}),e.jsx(o,{id:"docket_number",type:"text",className:"w-full mt-1",value:a.docket_number,onChange:r=>s("docket_number",r.target.value),placeholder:"Contoh: SJ-001",required:!0}),e.jsx(n,{message:i.docket_number,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"rit_number",value:"Ritase Ke-"}),e.jsx(o,{id:"rit_number",type:"number",className:"w-full mt-1",value:a.rit_number,onChange:r=>s("rit_number",r.target.value),placeholder:"1",required:!0}),e.jsx(n,{message:i.rit_number,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"slump",value:"Slump"}),e.jsx(o,{id:"slump",type:"text",className:"w-full mt-1",value:a.slump,onChange:r=>s("slump",r.target.value),placeholder:"12 +/- 2"}),e.jsx(n,{message:i.slump,className:"mt-1"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm space-y-6",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Detail Mutu & Volume"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"concrete_grade_id",value:"Mutu Beton"}),e.jsxs("select",{id:"concrete_grade_id",className:"w-full mt-1 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.concrete_grade_id,onChange:r=>j(r.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Mutu --"}),c.map(r=>e.jsx("option",{value:r.id,children:r.code},r.id))]}),e.jsx(n,{message:i.concrete_grade_id,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"volume",value:"Volume (m3)"}),e.jsx(o,{id:"volume",type:"number",step:"0.01",className:"w-full mt-1",value:a.volume,onChange:r=>s("volume",r.target.value),placeholder:"7.00",required:!0}),e.jsx(n,{message:i.volume,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"price_per_m3",value:"Harga / m3"}),e.jsx(o,{id:"price_per_m3",type:"number",className:"w-full mt-1",value:a.price_per_m3,onChange:r=>s("price_per_m3",r.target.value),placeholder:"Harga deal",required:!0}),e.jsx(n,{message:i.price_per_m3,className:"mt-1"})]})]}),e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-500/10 p-4 rounded-lg flex justify-between items-center border border-transparent dark:border-indigo-500/20",children:[e.jsx("span",{className:"text-sm font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"Total Harga Ritase Ini"}),e.jsx("span",{className:"text-xl font-black text-indigo-900 dark:text-white",children:y(a.total_price)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Armada & Driver"}),e.jsx("a",{href:route("delivery.trucks.index"),target:"_blank",className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium",children:"+ Kelola Master Truck"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(l,{htmlFor:"delivery_truck_id",value:"Pilih Truck (Auto-fill)"}),e.jsxs("select",{id:"delivery_truck_id",className:"w-full mt-1 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.delivery_truck_id||"",onChange:r=>f(r.target.value),children:[e.jsx("option",{value:"",children:"-- Manual / Tidak Ada di List --"}),u&&u.map(r=>e.jsxs("option",{value:r.id,children:[r.vehicle_number," ",r.driver_name?`- ${r.driver_name}`:""]},r.id))]}),e.jsx(n,{message:i.delivery_truck_id,className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"vehicle_number",value:"Nomor Polisi Kendaraan"}),e.jsx(o,{id:"vehicle_number",type:"text",className:"w-full mt-1",value:a.vehicle_number,onChange:r=>s("vehicle_number",r.target.value),placeholder:"G 1234 XX"}),e.jsx(n,{message:i.vehicle_number,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"driver_name",value:"Nama Driver"}),e.jsx(o,{id:"driver_name",type:"text",className:"w-full mt-1",value:a.driver_name,onChange:r=>s("driver_name",r.target.value),placeholder:"Nama pengemudi"}),e.jsx(n,{message:i.driver_name,className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"notes",value:"Catatan Tambahan"}),e.jsx("textarea",{id:"notes",className:"w-full mt-1 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.notes,onChange:r=>s("notes",r.target.value),placeholder:"Opsional",rows:"2"}),e.jsx(n,{message:i.notes,className:"mt-1"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[e.jsx(h,{href:a.delivery_project_id?route("delivery.projects.show",m.find(r=>r.id==a.delivery_project_id)?.slug||"#"):route("delivery.shipments.index"),className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-xs font-semibold uppercase tracking-widest text-gray-700 shadow-sm transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Batal"}),e.jsx(P,{disabled:x,children:x?"Menyimpan...":"Simpan Pengiriman"})]})]})]})]})}export{H as default};
