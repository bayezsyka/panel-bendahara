import{r as c,u as D,a as N,j as e,H as F,L as k}from"./app-DGuTbFC1.js";import{B as z,S as j}from"./BendaharaLayout-C226YywJ.js";import{P as _}from"./PrimaryButton-DxpKwrRV.js";import{S as K}from"./SecondaryButton-vN2GSb8o.js";import{M as W}from"./Modal-T6Q0OA9p.js";import{I as d}from"./InputLabel-CJENhlRx.js";import{T as p}from"./TextInput-Br8SVtrg.js";import{I as l}from"./InputError-CgkmUgRK.js";import{C as O}from"./Checkbox-DJLWh4jC.js";/* empty css            */import"./ApplicationLogo-Dr9AuRNq.js";import"./transition-COPwa7RV.js";import"./with-selector-iO060PpG.js";function re({auth:C,users:h,filters:f,offices:n=[]}){const[M,u]=c.useState(!1),[o,b]=c.useState(!1),[B,v]=c.useState(null),[m,S]=c.useState(f.search||""),{data:s,setData:t,post:L,put:A,processing:g,errors:r,reset:y,clearErrors:w}=D({name:"",email:"",password:"",role:"bendahara",office_id:1,is_active:!0,allowed_panels:[]});c.useEffect(()=>{const a=setTimeout(()=>{m!==(f.search||"")&&N.get(route("superadmin.users.index"),{search:m},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(a)},[m]);const U=()=>{b(!1),v(null),y(),w(),u(!0)},T=a=>{b(!0),v(a),t({name:a.name,email:a.email,password:"",role:a.role,office_id:a.office_id,allowed_panels:a.allowed_panels||[],is_active:!!a.is_active}),w(),u(!0)},x=()=>{u(!1),y()},E=a=>{a.preventDefault(),o?A(route("superadmin.users.update",B.id),{onSuccess:()=>x()}):L(route("superadmin.users.store"),{onSuccess:()=>x()})},I=a=>{t("is_active",a)},H=a=>{if(a.id===C.user.id){j.fire({icon:"error",title:"Opps!",text:"Anda tidak bisa menghapus akun sendiri."});return}j.fire({title:"Hapus User?",text:`Apakah Anda yakin ingin menghapus ${a.name}? Semua aktivitas log tetap tersimpan.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(i=>{i.isConfirmed&&N.delete(route("superadmin.users.destroy",a.id),{onSuccess:()=>{j.fire({icon:"success",title:"Terhapus!",text:"User telah berhasil dihapus.",timer:1500,showConfirmButton:!1})}})})};return e.jsxs(z,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Management User"}),children:[e.jsx(F,{title:"Management User"}),e.jsxs("div",{className:"py-12 relative min-h-[500px]",children:[n.length===0&&e.jsxs("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-md"}),e.jsxs("div",{className:"relative z-50 bg-white p-8 rounded-2xl shadow-2xl border border-gray-100 max-w-md w-full text-center animate-fade-in-up",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h3",{className:"text-xl font-black text-gray-900 mb-2",children:"Akses Dibatasi"}),e.jsxs("p",{className:"text-gray-500 mb-6 font-medium",children:["Maaf, halaman pengelolaan user hanya dapat diakses oleh ",e.jsx("span",{className:"text-indigo-600 font-bold",children:"Superadmin Kantor Utama"}),"."]}),e.jsxs("div",{className:"bg-orange-50 text-orange-800 text-xs font-semibold px-4 py-3 rounded-xl border border-orange-100 flex items-start gap-2 text-left",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Silakan hubungi Administrator Kantor Utama jika Anda memerlukan perubahan data user."})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(k,{href:route("projectexpense.overview"),className:"inline-flex items-center justify-center px-5 py-2.5 border border-transparent text-sm font-bold rounded-xl text-white bg-gray-900 hover:bg-gray-800 transition-all shadow-lg shadow-gray-200",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali ke Dashboard"]})})]})]}),e.jsx("div",{className:`max-w-7xl mx-auto sm:px-6 lg:px-8 transition-all duration-500 ${n.length===0?"blur-sm opacity-50 pointer-events-none select-none grayscale":""}`,children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsx("div",{className:"w-full sm:w-1/3",children:e.jsx(p,{type:"text",placeholder:"Cari nama atau email...",className:"w-full",value:m,onChange:a=>S(a.target.value)})}),e.jsx(_,{onClick:U,children:"+ Tambah User"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?[1,2,3,4,5].map(a=>e.jsxs("tr",{className:"opacity-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-20"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-48"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded w-24"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg"})]})})]},a)):h.data.length>0?h.data.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-bold text-gray-900",children:a.name}),e.jsxs("div",{className:"text-xs text-gray-400 font-medium",children:["UID: ",a.id]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-medium",children:a.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2.5 py-1 text-[10px] font-black uppercase tracking-wider rounded-lg w-fit ${a.role==="superadmin"?"bg-purple-100 text-purple-700":"bg-indigo-100 text-indigo-700"}`,children:a.role}),e.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest pl-1",children:n.find(i=>i.id===a.office_id)?.name||"N/A"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2.5 py-1 inline-flex text-[10px] font-black uppercase tracking-wider rounded-lg ${a.is_active?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:a.is_active?"Aktif":"Nonaktif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>T(a),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all",title:"Edit User",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>H(a),className:"p-2 text-rose-500 hover:bg-rose-50 rounded-xl transition-all",title:"Hapus User",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"Tidak ada data user."})})})]})}),n.length>0&&e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsx("div",{}),e.jsx("div",{className:"flex gap-2",children:h.links.map((a,i)=>e.jsx("div",{children:a.url?e.jsx(k,{href:a.url,className:`px-3 py-1 border rounded text-sm ${a.active?"bg-indigo-500 text-white border-indigo-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,dangerouslySetInnerHTML:{__html:a.label}}):e.jsx("span",{className:"px-3 py-1 border border-gray-300 rounded text-sm text-gray-400 bg-gray-100 cursor-not-allowed",dangerouslySetInnerHTML:{__html:a.label}})},i))})]})]})})]}),e.jsx(W,{show:M,onClose:x,children:e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:o?"Edit User":"Tambah User Baru"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Nama Lengkap"}),e.jsx(p,{id:"name",type:"text",className:"mt-1 block w-full",value:s.name,onChange:a=>t("name",a.target.value),required:!0,isFocused:!0}),e.jsx(l,{message:r.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",value:"Email"}),e.jsx(p,{id:"email",type:"email",className:"mt-1 block w-full",value:s.email,onChange:a=>t("email",a.target.value),required:!0}),e.jsx(l,{message:r.email,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password",value:"Password"}),e.jsx(p,{id:"password",type:"password",className:"mt-1 block w-full",value:s.password,onChange:a=>t("password",a.target.value),placeholder:o?"Isi jika ingin mengubah":"",required:!o}),e.jsx(l,{message:r.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Pilih Role Akses",className:"mb-2"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{id:"superadmin",name:"Superadmin",desc:"Akses penuh seluruh kantor & switcher",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04M12 21.499V21.5a11.955 11.955 0 01-8.618-3.04"},{id:"bendahara",name:"Bendahara",desc:"Akses modul Finance & Piutang",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}].map(a=>e.jsxs("button",{type:"button",onClick:()=>t("role",a.id),className:`flex flex-col p-3 rounded-xl border-2 text-left transition-all ${s.role===a.id?"border-indigo-600 bg-indigo-50/50 shadow-sm":"border-gray-100 hover:border-indigo-200 bg-white"}`,children:[e.jsx("div",{className:`p-1.5 rounded-lg w-fit mb-2 ${s.role===a.id?"bg-indigo-600 text-white":"bg-gray-100 text-gray-500"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a.icon})})}),e.jsx("span",{className:`text-[11px] font-black uppercase tracking-wider ${s.role===a.id?"text-indigo-700":"text-gray-900"}`,children:a.name}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1 leading-tight font-medium",children:a.desc})]},a.id))}),e.jsx(l,{message:r.role,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{value:"Penempatan Kantor",className:"mb-2"}),e.jsx("div",{className:"flex p-1 bg-gray-100 rounded-xl border border-gray-200",children:n.map(a=>e.jsx("button",{type:"button",onClick:()=>t("office_id",a.id),className:`flex-1 py-2 text-center rounded-lg text-xs font-black uppercase tracking-widest transition-all ${s.office_id===a.id?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:a.name},a.id))}),e.jsx(l,{message:r.office_id,className:"mt-2"})]}),s.role==="bendahara"&&e.jsxs("div",{children:[e.jsx(d,{value:"Akses Panel",className:"mb-2"}),e.jsx("div",{className:"flex flex-col gap-2",children:[{id:"finance",label:"Finance (Biaya Proyek & Operasional)"},{id:"plant_cash",label:"Plant Cash (Kas Besar & Kecil)"},{id:"receivable",label:"Receivable (Piutang)"}].map(a=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx(O,{name:"allowed_panels",value:a.id,checked:s.allowed_panels.includes(a.id),onChange:i=>{const P=i.target.checked;t("allowed_panels",P?[...s.allowed_panels,a.id]:s.allowed_panels.filter($=>$!==a.id))}}),e.jsx("span",{className:"text-gray-700 text-sm font-medium",children:a.label})]},a.id))}),e.jsx(l,{message:r.allowed_panels,className:"mt-2"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.is_active,onChange:a=>I(a.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900",children:"Status Aktif"})]})}),e.jsx(l,{message:r.is_active,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(K,{onClick:x,disabled:g,children:"Batal"}),e.jsx(_,{disabled:g,children:g?"Menyimpan...":o?"Simpan Data":"Buat User"})]})]})})]})}export{re as default};
