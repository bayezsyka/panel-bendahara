import{b as A,r as a,R as P,a as q,u as G,j as e,H as L}from"./app-DteqDP6z.js";import{B as z}from"./BendaharaLayout-Y4eYKbl_.js";import{S as J}from"./SearchInput-D56qQT4w.js";import{M as v}from"./Modal-DBfKL5QP.js";import{I as u}from"./InputLabel-Ud7_2xCW.js";import{T as x}from"./TextInput-BES_4MaH.js";import{P as M}from"./PrimaryButton-DDpf5jRw.js";import{S}from"./SecondaryButton-ImdCa0q-.js";import{D as Q}from"./DangerButton-CzviOQPB.js";import{I as p}from"./InputError-Cg1LX1Eh.js";/* empty css            */import"./ApplicationLogo-CFUqUAf-.js";import"./transition-CEgtaOYI.js";import"./use-sync-refs-DPG-LCFQ.js";import"./open-closed-BdKgPkKs.js";import"./keyboard-BygUKIa8.js";import"./with-selector-hyrcWQ_n.js";import"./description-CE2MTl-4.js";import"./close-provider-PEpNyiF9.js";function ue({concreteGrades:h,filters:j={}}){const{auth:w}=A().props,{can_create:k,can_edit:D,can_delete:C}=w.permissions||{},[r,B]=a.useState(j.search||"");P.useEffect(()=>{const t=setTimeout(()=>{r!==(j.search||"")&&q.get(route("delivery.concrete-grades.index"),{search:r},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},[r]);const[I,f]=a.useState(!1),[c,o]=a.useState(null),[T,i]=a.useState(!1),[g,y]=a.useState(null),{data:d,setData:l,post:E,put:F,delete:H,processing:s,errors:m,reset:b}=G({code:"",price:"",description:""}),N=(t=null)=>{t?(o(t),l({code:t.code,price:t.price,description:t.description||""})):(o(null),b()),f(!0)},n=()=>{f(!1),o(null),b()},K=t=>{t.preventDefault(),c?F(route("delivery.concrete-grades.update",c.id),{onSuccess:()=>n()}):E(route("delivery.concrete-grades.store"),{onSuccess:()=>n()})},O=t=>{y(t),i(!0)},R=()=>{g&&H(route("delivery.concrete-grades.destroy",g.id),{onSuccess:()=>{i(!1),y(null)}})},_=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t);return e.jsxs(z,{children:[e.jsx(L,{title:"Master Mutu Beton"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Mutu Beton"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Kelola daftar mutu beton dan harga default"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{value:r,onChange:B,placeholder:"Cari mutu..."}),k&&e.jsx(M,{onClick:()=>N(),children:"+ Tambah Mutu"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Kode Mutu"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Harga Default"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Keterangan"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:h.length>0?h.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:t.code}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-semibold",children:_(t.price)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:t.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-center whitespace-nowrap",children:e.jsxs("div",{className:"flex justify-center",children:[D&&e.jsx("button",{onClick:()=>N(t),className:"text-indigo-600 hover:text-indigo-900 mx-2 text-sm font-medium",children:"Edit"}),C&&e.jsx("button",{onClick:()=>O(t),className:"text-red-600 hover:text-red-900 mx-2 text-sm font-medium",children:"Hapus"})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-500 italic",children:"Belum ada data mutu beton"})})})]})})]}),e.jsx(v,{show:I,onClose:n,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:c?"Edit Mutu Beton":"Tambah Mutu Beton"}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"code",value:"Kode Mutu"}),e.jsx(x,{id:"code",type:"text",className:"w-full mt-1",value:d.code,onChange:t=>l("code",t.target.value),placeholder:"Contoh: K-225, K-300",required:!0}),e.jsx(p,{message:m.code,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"price",value:"Harga Default (Template)"}),e.jsx(x,{id:"price",type:"number",className:"w-full mt-1",value:d.price,onChange:t=>l("price",t.target.value),placeholder:"0",required:!0}),e.jsx(p,{message:m.price,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"description",value:"Keterangan"}),e.jsx(x,{id:"description",type:"text",className:"w-full mt-1",value:d.description,onChange:t=>l("description",t.target.value),placeholder:"Opsional"}),e.jsx(p,{message:m.description,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(S,{onClick:n,disabled:s,children:"Batal"}),e.jsx(M,{disabled:s,children:s?"Menyimpan...":"Simpan"})]})]})]})}),e.jsx(v,{show:T,onClose:()=>i(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hapus Mutu Beton?"}),e.jsx("p",{className:"text-gray-600 mb-6 font-medium",children:"Apakah Anda yakin ingin menghapus mutu beton ini? Tindakan ini tidak dapat dibatalkan."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(S,{onClick:()=>i(!1),children:"Batal"}),e.jsx(Q,{onClick:R,disabled:s,children:s?"Menghapus...":"Hapus"})]})]})})]})}export{ue as default};
