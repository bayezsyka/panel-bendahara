import{r as N,u as F,j as e,H as E,c as g}from"./app-CA3Jrf7q.js";import{B as H,S as p}from"./BendaharaLayout-CUuFvxaT.js";import{M as W}from"./Modal-Cfb4vwno.js";import{I as m}from"./InputLabel-C6csEeYH.js";import{T as j}from"./TextInput-DPGSP2at.js";import{I as h}from"./InputError-BO1yj7N9.js";import{P}from"./PrimaryButton-DzgKkOzy.js";import{S as R}from"./SecondaryButton-4gA8aX4V.js";/* empty css            */import"./ApplicationLogo-DjjSPtE0.js";import"./transition-I7zwD-Ab.js";import"./with-selector-9RFk3h7t.js";function Z({transactions:f,expenseTypes:y,totalIn:k,totalOut:w,balance:n,filters:i}){const[_,r]=N.useState(!1),[l,d]=N.useState(null),{data:a,setData:s,post:K,put:C,processing:S,errors:u,reset:o}=F({transaction_date:new Date().toISOString().split("T")[0],description:"",amount:"",type:"in",cash_type:"kas_kecil",expense_type_id:""}),c=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),B=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),T=t=>{t.preventDefault(),l?C(route("bendahara.plant-transactions.update",l),{onSuccess:()=>{r(!1),d(null),o(),p.fire("Berhasil","Transaksi berhasil diperbarui","success")}}):K(route("bendahara.plant-transactions.store"),{onSuccess:()=>{r(!1),o(),p.fire("Berhasil","Transaksi berhasil dicatat","success")}})},M=t=>{d(t.id),s({transaction_date:t.transaction_date.split("T")[0],description:t.description,amount:t.amount,type:t.type,cash_type:"kas_kecil",expense_type_id:t.expense_type_id||""}),r(!0)},I=t=>{p.fire({title:"Apakah Anda yakin?",text:"Data akan dihapus permanen!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!"}).then(x=>{x.isConfirmed&&g.delete(route("bendahara.plant-transactions.destroy",t),{onSuccess:()=>p.fire("Terhapus!","Data berhasil dihapus.","success")})})},v=(t="in")=>{d(null),o(),s({transaction_date:new Date().toISOString().split("T")[0],description:"",amount:"",type:t,cash_type:"kas_kecil",expense_type_id:""}),r(!0)},b=(t,x)=>{g.get(route("bendahara.plant.kas-kecil"),{...i,[t]:x||void 0},{preserveState:!0,replace:!0})},L=()=>{g.get(route("bendahara.plant.kas-kecil"),{},{preserveState:!0,replace:!0})},D=i.type||i.expense_type_id;return e.jsxs(H,{children:[e.jsx(E,{title:"Kas Kecil"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Kas Kecil"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Pencatatan arus kas kecil kantor plant"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>v("in"),className:"inline-flex items-center px-4 py-2 bg-emerald-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Kas Masuk"]}),e.jsxs("button",{onClick:()=>v("out"),className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Kas Keluar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-white rounded-xl border border-emerald-100 p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx("svg",{className:"h-5 w-5 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Total Kas Masuk"}),e.jsx("div",{className:"text-lg font-bold text-emerald-600",children:c(k)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white rounded-xl border border-red-100 p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-red-100",children:e.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Total Kas Keluar"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:c(w)})]})]})}),e.jsx("div",{className:`bg-gradient-to-br ${n>=0?"from-blue-50 to-white border-blue-100":"from-orange-50 to-white border-orange-100"} rounded-xl border p-5 shadow-sm`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-lg ${n>=0?"bg-blue-100":"bg-orange-100"}`,children:e.jsx("svg",{className:`h-5 w-5 ${n>=0?"text-blue-600":"text-orange-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Saldo"}),e.jsx("div",{className:`text-lg font-bold ${n>=0?"text-blue-600":"text-orange-600"}`,children:c(n)})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsxs("select",{value:i.type||"",onChange:t=>b("type",t.target.value),className:"rounded-lg border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Semua Transaksi"}),e.jsx("option",{value:"in",children:"Kas Masuk"}),e.jsx("option",{value:"out",children:"Kas Keluar"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipe Biaya:"}),e.jsxs("select",{value:i.expense_type_id||"",onChange:t=>b("expense_type_id",t.target.value),className:"rounded-lg border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Semua Tipe"}),y.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),D&&e.jsx("button",{onClick:L,className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium",children:"Reset Filter"})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider w-12",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Tanggal"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Keterangan"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Tipe Biaya"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-emerald-600 uppercase tracking-wider",children:"Kas Masuk"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-red-600 uppercase tracking-wider",children:"Kas Keluar"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-600 uppercase tracking-wider w-24",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:f.length>0?f.map((t,x)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:x+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:B(t.transaction_date)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.description}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.expense_type?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:t.expense_type.name}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-emerald-600",children:t.type==="in"?c(t.amount):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-red-600",children:t.type==="out"?c(t.amount):"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>M(t),className:"text-indigo-600 hover:text-indigo-900 text-xs font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>I(t.id),className:"text-red-600 hover:text-red-900 text-xs font-medium",children:"Hapus"})]})})]},t.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-4 py-12 text-center text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Belum ada transaksi. Klik tombol di atas untuk menambah."]})})})]})})})]}),e.jsx(W,{show:_,onClose:()=>{r(!1),d(null),o()},children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:l?"Edit Transaksi":a.type==="in"?"Input Kas Masuk":"Input Kas Keluar"}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[!l&&e.jsxs("div",{children:[e.jsx(m,{htmlFor:"type",value:"Jenis Transaksi"}),e.jsxs("div",{className:"mt-2 flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"type",value:"in",checked:a.type==="in",onChange:t=>s("type",t.target.value),className:"mr-2 text-emerald-600 focus:ring-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-emerald-700",children:"Kas Masuk"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"type",value:"out",checked:a.type==="out",onChange:t=>s("type",t.target.value),className:"mr-2 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Kas Keluar"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"date",value:"Tanggal Transaksi"}),e.jsx(j,{id:"date",type:"date",className:"mt-1 block w-full",value:a.transaction_date,onChange:t=>s("transaction_date",t.target.value),required:!0}),e.jsx(h,{message:u.transaction_date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",value:"Keterangan"}),e.jsx(j,{id:"description",className:"mt-1 block w-full",value:a.description,onChange:t=>s("description",t.target.value),placeholder:"Contoh: Uang Jajan / Fotokopi",required:!0}),e.jsx(h,{message:u.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"expense_type",value:"Tipe Biaya (Opsional)"}),e.jsxs("select",{id:"expense_type",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:a.expense_type_id,onChange:t=>s("expense_type_id",t.target.value),children:[e.jsx("option",{value:"",children:"-- Pilih Tipe Biaya --"}),y.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(h,{message:u.expense_type_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"amount",value:"Jumlah (Rp)"}),e.jsx(j,{id:"amount",type:"number",className:"mt-1 block w-full",value:a.amount,onChange:t=>s("amount",t.target.value),placeholder:"0",required:!0}),e.jsx(h,{message:u.amount,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(R,{onClick:()=>{r(!1),d(null),o()},children:"Batal"}),e.jsx(P,{disabled:S,children:l?"Simpan Perubahan":"Simpan Transaksi"})]})]})]})})]})}export{Z as default};
