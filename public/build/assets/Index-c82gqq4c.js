import{b as A,r as i,u as O,a as h,j as e,H as Y,L as U}from"./app-DteqDP6z.js";import{B as V}from"./BendaharaLayout-Y4eYKbl_.js";import{M as z}from"./Modal-DBfKL5QP.js";import{I as p}from"./InputLabel-Ud7_2xCW.js";import{T as f}from"./TextInput-BES_4MaH.js";import{P as G}from"./PrimaryButton-DDpf5jRw.js";import{S as J}from"./SecondaryButton-ImdCa0q-.js";import{S as Q}from"./SearchInput-D56qQT4w.js";import{D as j,C as W,a as Z,b as ee}from"./download-ByUQGSxm.js";import{C as te}from"./calendar-4MBc-ZvL.js";import{F as T}from"./file-text-CUbWllj9.js";import{C as ae}from"./chevron-right-9K-O7ibI.js";/* empty css            */import"./ApplicationLogo-CFUqUAf-.js";import"./transition-CEgtaOYI.js";import"./use-sync-refs-DPG-LCFQ.js";import"./open-closed-BdKgPkKs.js";import"./keyboard-BygUKIa8.js";import"./with-selector-hyrcWQ_n.js";import"./description-CE2MTl-4.js";import"./close-provider-PEpNyiF9.js";function Ce({shipments:o,selectedDate:s,prevDate:re,nextDate:se,filters:k={}}){const{auth:I}=A().props,{can_edit:E}=I.permissions||{},[n,P]=i.useState(k.search||""),[v,u]=i.useState("none"),[F,N]=i.useState(0),c=i.useRef(null),[L,g]=i.useState(!1),[l,y]=i.useState("range"),{data:r,setData:m}=O({start_date:s,end_date:s,month:new Date().getMonth()+1,year:new Date().getFullYear()}),w=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),M=t=>new Date(t).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"});i.useEffect(()=>{const t=setTimeout(()=>{n!==(k.search||"")&&h.get(route("delivery.shipments.index"),{search:n,date:s},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},[n]);const R=t=>{u("none"),h.visit(route("delivery.shipments.index",{date:t.target.value,search:n}),{preserveScroll:!0})},S=t=>{u(t>0?"right":"left"),N(x=>x+1);const a=new Date(s);a.setDate(a.getDate()+t);const d=a.toISOString().split("T")[0];h.visit(route("delivery.shipments.index",{date:d,search:n}),{preserveScroll:!0})},C=t=>{u(t>0?"right":"left"),N(x=>x+1);const a=new Date(s);a.setMonth(a.getMonth()+t);const d=a.toISOString().split("T")[0];h.visit(route("delivery.shipments.index",{date:d,search:n}),{preserveScroll:!0})},B=()=>{const t=route("delivery.shipments.export-pdf",{start_date:s,end_date:s});window.open(t,"_blank")},D=t=>{y(t),g(!0)},$=t=>{t.preventDefault();let a={};if(l==="range")a.start_date=r.start_date,a.end_date=r.end_date;else if(l==="month"){const x=new Date(r.year,r.month-1,1),H=new Date(r.year,r.month,0),_=b=>{const q=b.getFullYear(),K=String(b.getMonth()+1).padStart(2,"0"),X=String(b.getDate()).padStart(2,"0");return`${q}-${K}-${X}`};a.start_date=_(x),a.end_date=_(H)}const d=`${route("delivery.shipments.export-pdf")}?${new URLSearchParams(a).toString()}`;window.open(d,"_blank"),g(!1)};return e.jsxs(V,{children:[e.jsx(Y,{title:"Rekap Pengiriman Beton"}),e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Rekap Pengiriman"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daftar seluruh data pengiriman harian"})]}),e.jsx("div",{className:"flex flex-col md:flex-row gap-3",children:e.jsx(Q,{value:n,onChange:P,placeholder:"Cari surat jalan, mobil...",className:"w-full md:w-64"})})]}),e.jsx("div",{className:"bg-white dark:bg-[#222238] rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700/50",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[e.jsxs("button",{onClick:()=>D("range"),className:"flex items-center gap-2 px-4 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-xs font-semibold text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap",children:[e.jsx(j,{className:"w-4 h-4"})," Export Rentang"]}),e.jsxs("button",{onClick:()=>D("month"),className:"flex items-center gap-2 px-4 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-xs font-semibold text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap",children:[e.jsx(te,{className:"w-4 h-4"})," Export Bulan"]}),e.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800 rounded-xl text-xs font-semibold text-indigo-700 dark:text-indigo-300 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors whitespace-nowrap",children:[e.jsx(T,{className:"w-4 h-4"})," Export Hari Ini"]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-800 p-1.5 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>C(-1),className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg text-gray-500 dark:text-gray-400 transition-colors",title:"Bulan Lalu",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(-1),className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg text-gray-500 dark:text-gray-400 transition-colors",title:"Kemarin",children:e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative group cursor-pointer hover:bg-white dark:hover:bg-gray-700 transition-colors rounded-lg overflow-hidden",onClick:()=>c.current?.showPicker?c.current.showPicker():c.current.click(),children:[e.jsx("input",{ref:c,type:"date",value:s,onChange:R,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer pointer-events-none"}),e.jsx("div",{className:`px-4 py-1.5 text-center min-w-[200px] transition-all duration-300 ${v==="left"?"animate-slide-left":v==="right"?"animate-slide-right":""}`,children:e.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm whitespace-nowrap",children:M(s)})},F)]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>S(1),className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg text-gray-500 dark:text-gray-400 transition-colors",title:"Besok",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(1),className:"p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg text-gray-500 dark:text-gray-400 transition-colors",title:"Bulan Depan",children:e.jsx(ee,{className:"w-4 h-4"})})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-[#222238] rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700/50 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50/50 dark:bg-gray-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Docket / Rit"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Customer / Project"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Mutu"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Mobil / Supir"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider text-right",children:"Volume"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider text-right",children:"Total Harga"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-700/50",children:o.length>0?o.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/30 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["#",t.docket_number||"-"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Rit Ke-",t.rit_number]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400",children:t.project?.customer?.name}),e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[200px]",children:t.project?.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800",children:t.concrete_grade?.code})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.vehicle_number||"-"}),e.jsx("span",{className:"text-xs text-gray-500",children:t.driver_name||"-"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:[t.volume," m³"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("span",{className:"text-sm font-black text-gray-900 dark:text-white",children:w(t.total_price)})}),e.jsx("td",{className:"px-6 py-4 text-center",children:E&&e.jsx(U,{href:route("delivery.shipments.edit",t.id),className:"inline-flex items-center px-3 py-1.5 bg-gray-50 hover:bg-indigo-50 text-gray-600 hover:text-indigo-600 rounded-lg text-xs font-bold transition-all",children:"Edit"})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(T,{className:"w-12 h-12 text-gray-200 mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Tidak ada data pengiriman pada tanggal ini"}),n&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Coba hapus filter pencarian"})]})})})}),o.length>0&&e.jsx("tfoot",{className:"bg-gray-50 dark:bg-gray-800/80 border-t border-gray-100 dark:border-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-right font-bold text-gray-600 dark:text-gray-300",children:"Total Hari Ini"}),e.jsxs("td",{className:"px-6 py-4 text-right font-black text-indigo-600 dark:text-indigo-400 text-base",children:[o.reduce((t,a)=>t+Number(a.volume),0).toFixed(2)," m³"]}),e.jsx("td",{className:"px-6 py-4 text-right font-black text-indigo-600 dark:text-indigo-400 text-base",children:w(o.reduce((t,a)=>t+Number(a.total_price),0))}),e.jsx("td",{})]})})]})})})]}),e.jsx(z,{show:L,onClose:()=>g(!1),children:e.jsxs("div",{className:"p-6 dark:bg-[#222238]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl transition-colors",children:e.jsx(j,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Export Laporan Pengiriman"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pilih rentang waktu untuk laporan PDF"})]})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl mb-4",children:[e.jsx("button",{type:"button",onClick:()=>y("range"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${l==="range"?"bg-white dark:bg-gray-700 shadow-sm text-indigo-600":"text-gray-500"}`,children:"Rentang Tanggal"}),e.jsx("button",{type:"button",onClick:()=>y("month"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${l==="month"?"bg-white dark:bg-gray-700 shadow-sm text-indigo-600":"text-gray-500"}`,children:"Per Bulan"})]}),l==="range"?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{value:"Dari Tanggal"}),e.jsx(f,{type:"date",className:"w-full mt-1",value:r.start_date,onChange:t=>m("start_date",t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{value:"Sampai Tanggal"}),e.jsx(f,{type:"date",className:"w-full mt-1",value:r.end_date,onChange:t=>m("end_date",t.target.value),required:!0})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{value:"Bulan"}),e.jsx("select",{className:"w-full mt-1 border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:r.month,onChange:t=>m("month",t.target.value),required:!0,children:Array.from({length:12},(t,a)=>e.jsx("option",{value:a+1,children:new Date(0,a).toLocaleString("id-ID",{month:"long"})},a+1))})]}),e.jsxs("div",{children:[e.jsx(p,{value:"Tahun"}),e.jsx(f,{type:"number",className:"w-full mt-1",value:r.year,onChange:t=>m("year",t.target.value),required:!0,min:"2020",max:"2030"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-8",children:[e.jsx(J,{onClick:()=>g(!1),children:"Batal"}),e.jsxs(G,{className:"gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Download Laporan"]})]})]})]})}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes slide-left {
                    0% { transform: translateX(20px); opacity: 0; }
                    100% { transform: translateX(0); opacity: 1; }
                }
                @keyframes slide-right {
                    0% { transform: translateX(-20px); opacity: 0; }
                    100% { transform: translateX(0); opacity: 1; }
                }
                .animate-slide-left { animation: slide-left 0.3s ease-out; }
                .animate-slide-right { animation: slide-right 0.3s ease-out; }
            `}})]})}export{Ce as default};
