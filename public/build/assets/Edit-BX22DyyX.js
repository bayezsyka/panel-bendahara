import{u as E,r as u,j as e,H as B,L as f}from"./app-DteqDP6z.js";import{B as L}from"./BendaharaLayout-Y4eYKbl_.js";import{I as o}from"./InputLabel-Ud7_2xCW.js";import{T as d}from"./TextInput-BES_4MaH.js";import{P as O}from"./PrimaryButton-DDpf5jRw.js";import{I as m}from"./InputError-Cg1LX1Eh.js";import{X as v}from"./disclosure-C2BnzcXY.js";/* empty css            */import"./ApplicationLogo-CFUqUAf-.js";import"./use-resolve-button-type-eEx3CkTO.js";import"./keyboard-BygUKIa8.js";import"./use-sync-refs-DPG-LCFQ.js";import"./open-closed-BdKgPkKs.js";import"./close-provider-PEpNyiF9.js";function U({pumpRental:t,project:a}){const{data:r,setData:i,put:b,processing:g,errors:l}=E({date:t.date,docket_number:t.docket_number||"",vehicle_number:t.vehicle_number||"",driver_name:t.driver_name||"",volume_pumped:t.volume_pumped||"",pipes_used:t.pipes_used||"",notes:t.notes||""}),[j,N]=u.useState(parseFloat(t.total_price)),[c,y]=u.useState(0),[p,w]=u.useState(0),x=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s);u.useEffect(()=>{const s=parseFloat(r.volume_pumped)||0,n=parseInt(r.pipes_used)||0,P=parseFloat(a.pump_limit_volume)||0,F=parseInt(a.pump_limit_pipe)||0,T=parseFloat(a.pump_rental_price)||0,C=parseFloat(a.pump_over_volume_price)||0,I=parseFloat(a.pump_over_pipe_price)||0,h=Math.max(0,s-P),_=Math.max(0,n-F);y(h),w(_);const S=T+h*C+_*I;N(S)},[r.volume_pumped,r.pipes_used,a]);const k=s=>{s.preventDefault(),b(route("delivery.pump-rentals.update",t.id))};return e.jsxs(L,{children:[e.jsx(B,{title:`Edit Sewa Pompa: ${a.name}`}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs(f,{href:route("delivery.projects.show",a.slug),className:"text-sm text-indigo-600 hover:text-indigo-900 flex items-center gap-1 mb-2 font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali ke Proyek"]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Sewa Pompa"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Proyek: ",e.jsx("span",{className:"font-semibold",children:a.name})]})]}),e.jsxs("form",{onSubmit:k,className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"date",value:"Tanggal Sewa"}),e.jsx(d,{id:"date",type:"date",className:"w-full mt-1",value:r.date,onChange:s=>i("date",s.target.value),required:!0}),e.jsx(m,{message:l.date,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"docket_number",value:"No. Surat Jalan / Tiket (Opsional)"}),e.jsx(d,{id:"docket_number",type:"text",className:"w-full mt-1",value:r.docket_number,onChange:s=>i("docket_number",s.target.value),placeholder:"Nomor Tiket..."}),e.jsx(m,{message:l.docket_number,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"vehicle_number",value:"No. Polisi Truk Pompa"}),e.jsx(d,{id:"vehicle_number",type:"text",className:"w-full mt-1",value:r.vehicle_number,onChange:s=>i("vehicle_number",s.target.value),placeholder:"Contoh: B 1234 CD"}),e.jsx(m,{message:l.vehicle_number,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"driver_name",value:"Nama Operator / Supir"}),e.jsx(d,{id:"driver_name",type:"text",className:"w-full mt-1",value:r.driver_name,onChange:s=>i("driver_name",s.target.value),placeholder:"Nama Operator"}),e.jsx(m,{message:l.driver_name,className:"mt-1"})]})]}),e.jsx(v,{defaultOpen:parseFloat(t.volume_pumped)>parseFloat(t.limit_volume)||parseInt(t.pipes_used)>parseInt(t.limit_pipe),children:({open:s})=>e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs(v.Button,{className:"flex w-full justify-between rounded-lg bg-gray-50 px-4 py-3 text-left text-sm font-medium text-gray-900 hover:bg-gray-100 focus:outline-none focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Advanced: Input Volume & Pipa Tambahan"}),(r.volume_pumped||r.pipes_used)&&e.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-[10px] px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:"Active"})]}),e.jsx("svg",{className:`${s?"rotate-180 transform":""} h-5 w-5 text-gray-500 transition-transform`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})]}),e.jsx(v.Panel,{className:"px-4 pt-4 pb-4 text-sm text-gray-500 bg-white rounded-b-lg border-t border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"volume_pumped",value:"Total Volume Dipompa (m³)"}),e.jsx(d,{id:"volume_pumped",type:"number",step:"0.01",className:"w-full mt-1",value:r.volume_pumped,onChange:n=>i("volume_pumped",n.target.value),placeholder:"0"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Limit: ",a.pump_limit_volume," m³.",c>0&&e.jsxs("span",{className:"text-red-600 font-bold ml-1",children:["Over: ",c.toFixed(2)," m³ (+ ",x(c*a.pump_over_volume_price),")"]})]}),e.jsx(m,{message:l.volume_pumped,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"pipes_used",value:"Total Pipa Terpakai (Batang)"}),e.jsx(d,{id:"pipes_used",type:"number",className:"w-full mt-1",value:r.pipes_used,onChange:n=>i("pipes_used",n.target.value),placeholder:"0"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Limit: ",a.pump_limit_pipe," btg.",p>0&&e.jsxs("span",{className:"text-red-600 font-bold ml-1",children:["Over: ",p," btg (+ ",x(p*a.pump_over_pipe_price),")"]})]}),e.jsx(m,{message:l.pipes_used,className:"mt-1"})]})]})})]})}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"notes",value:"Catatan Tambahan (Opsional)"}),e.jsx("textarea",{id:"notes",className:"w-full mt-1 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:"3",value:r.notes,onChange:s=>i("notes",s.target.value),placeholder:"Tulis catatan jika ada..."}),e.jsx(m,{message:l.notes,className:"mt-1"})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-100",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Estimasi Total:"}),e.jsx("span",{className:"ml-2 text-lg font-bold text-gray-900",children:x(j)})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{href:route("delivery.projects.show",a.slug),className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-xs font-semibold uppercase tracking-widest text-gray-700 shadow-sm transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Batal"}),e.jsx(O,{className:"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500",disabled:g,children:g?"Menyimpan...":"Perbarui Sewa Pompa"})]})]})]})]})]})}export{U as default};
